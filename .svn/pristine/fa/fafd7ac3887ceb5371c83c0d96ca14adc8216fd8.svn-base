webpackJsonp([122],{1348:function(t,e,a){a(2081);var i=a(162)(a(1728),a(2341),"data-v-24a5e372",null);t.exports=i.exports},1728:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{reNo:"",poDate:"",supplierName:"",deliveryDate:"",deliverName:"",psisshow:!1,searchKeyword:"",row:{},isLoading:!0,visible:!1,dataList:[],orderListname:[{label:"全部",value:0},{label:"未审核",value:1},{label:"未签收",value:3},{label:"进货单",value:5},{label:"退货单",value:7},{label:"已签收",value:9}],total:0,pageSize:0,valId:"",type:"",uid:this.$store.state.common.token,columns:[{type:"selection",width:60,align:"center"},{title:"编码",ellipsis:!0,width:140,align:"center",key:"recordNo",render:function(t,e){return t("div",[t("span",{style:{marginRight:"8px"}},e.row.recordNo),t("Tooltip",{props:{content:"有附件",placement:"right-start"}},[t("img",{domProps:{src:e.row.attachs?"http://img.zsydian.com/icon/gys_file.png":"",style:"cursor:pointer;vertical-align:middle;width:10px;height:10px"}})])])}},{title:"商品",ellipsis:!0,key:"skuName"},{title:"供应商",ellipsis:!0,key:"partnerName"},{title:"数量",ellipsis:!0,align:"center",key:"qty",width:120},{title:"金额",ellipsis:!0,align:"center",key:"totalAmount",width:120},{title:"类型",ellipsis:!0,align:"center",key:"type",width:80},{title:"采购时间",ellipsis:!0,align:"center",key:"poDate"},{title:"收货人",ellipsis:!0,align:"center",key:"deliverName",width:80},{title:"收货人手机",ellipsis:!0,align:"center",key:"deliverMobile",width:120},{title:"收货人地址",ellipsis:!0,align:"center",key:"deliverAddress",width:170},{title:"状态",ellipsis:!0,align:"center",width:80,key:"statusDesc",render:function(t,e){return t("div",{style:{fontWeight:"900",color:"待审核"==e.row.statusDesc?"#5789E6":"已审核"==e.row.statusDesc?"#278fa3":"已完成"==e.row.statusDesc?"#40ca98":"已签收"==e.row.statusDesc?"#40ca98":"已作废"==e.row.statusDesc?"#ff0000":"签收中"==e.row.statusDesc?"#3b77e3":""}},e.row.statusDesc)}}]}},methods:{gotoAdd:function(){this.$router.push({path:"/addprepo"})},dbl:function(t,e){this.isLoading=!0,this.$router.push({path:"/addprepo",query:{id:t.id,index:e}})},orderselected:function(t){var e=this;this.value=t,this.axios.get("/prepo/query/"+t+"?uid="+this.uid).then(function(t){if("200"==t.data.status){var a=t.data;e.dataList=a.rows,e.total=t.data.total,e.pageSize=t.data.pageSize,e.isLoading=!1,e.dataList.forEach(function(t){t.createTime=new Date(t.createTime).toLocaleDateString().replace(/\//g,"-"),t.status})}else e.$notify({title:"",message:t.data.errorMessage,type:"error",position:"bottom-right"})})},getcgList:function(){var t=this;this.axios.get("/prepo/query?uid="+this.uid).then(function(e){var a=e.data;"200"==e.data.status?(t.dataList=a.rows,t.total=e.data.total,t.pageSize=e.data.pageSize,t.dataList.forEach(function(t){t.status,t.createTime=new Date(t.createTime).toLocaleDateString().replace(/\//g,"-"),t.type,1==t.type&&(t.type="进货"),2==t.type&&(t.type="退货")}),t.pageSize=a.pageSize,t.total=a.total):t.$notify({title:"",message:e.data.errorMessage,type:"error",position:"bottom-right"})})},selected:function(t,e){this.valId=e.id,this.row=e},clickRow:function(t){this.valId=t.id},delcg:function(){var t=this;""==this.valId?this.$notify({title:"",message:"请选择采购订单",type:"error",position:"bottom-right"}):this.axios.delete("prepo/delete/"+this.valId+"?uid="+this.uid).then(function(e){"200"==e.data.status?(t.$notify({title:"",message:t.$t("public.deleteSuccess"),type:"error",position:"bottom-right"}),t.getcgList()):t.$Message.error(e.data.errorMessage)})},search:function(){var t=this;this.axios.get("/prepo/query?keyword="+this.searchKeyword+"&uid="+this.uid).then(function(e){if(200==e.data.status){var a=e.data;t.dataList=a.rows,t.pageSize=a.pageSize,t.total=a.total,t.dataList.forEach(function(t,e){t.Raddress=t.province+t.city,t.ContentAddress=t.province+t.city})}})},enterSearch:function(){this.search()},searchLocation:function(){this.psisshow=!0},shdatepoDate:function(t){this.poDate=t},shdate:function(t){this.deliveryDate=t},sureSearchLocation:function(){var t=this;this.axios.get("/prepo/query/0?uid="+this.uid,{recordNo:this.reNo,poDate:this.poDate,supplierName:this.supplierName,deliveryDate:this.deliveryDate}).then(function(e){if(200==e.data.status){var a=e.data;t.dataList=a.rows,t.pageSize=a.pageSize,t.total=a.total,t.reNo="",t.poDate="",t.supplierName="",t.deliveryDate="",t.psisshow=!1}})},cancelSearchLocation:function(){this.reNo="",this.poDate="",this.supplierName="",this.deliveryDate="",this.psisshow=!1},getData:function(t){var e=this;this.axios.get("/prepo/query?offset="+t+"&uid="+this.uid).then(function(t){e.dataList=t.data.rows,e.dataList.forEach(function(t,e){switch(t.status){case 77:t.statusDesc="签收完成";break;case 1:t.statusDesc="未审核";break;case 15:t.statusDesc="已审核";break;case 88:t.statusDesc="已完成";break;case 19:t.statusDesc="已作废"}t.createTime=new Date(t.createTime).toLocaleDateString().replace(/\//g,"-")})})},changePageSize:function(t){this.pageSize=t}},mounted:function(){this.getcgList()}}},1809:function(t,e,a){e=t.exports=a(1190)(),e.push([t.i,".footer-mark[data-v-24a5e372]{width:100%;height:40px;border-top:1px solid #e4e4e4;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;margin-bottom:-10px}.footer-mark span[data-v-24a5e372]{height:40px;line-height:40px}p.edit[data-v-24a5e372]:hover{color:blue}.units-box[data-v-24a5e372]{width:100%;height:auto;background:#fff}.btns-box[data-v-24a5e372]{width:100%;-ms-flex-pack:justify;justify-content:space-between}.btns-box[data-v-24a5e372],.wldw[data-v-24a5e372]{height:60px;display:-ms-flexbox;display:flex;line-height:60px}.wldw[data-v-24a5e372]{margin-left:10px}.right[data-v-24a5e372]{margin-right:10px}.ivu-icon-chevron-down[data-v-24a5e372]{font-size:10px}.btns img[data-v-24a5e372]{width:14px;height:14px;vertical-align:middle}.table[data-v-24a5e372]{margin:0 10px 100px}.page-box[data-v-24a5e372]{text-align:center;margin-top:2px;margin-bottom:120px}","",{version:3,sources:["C:/Users/cxy/Desktop/zsyd/src/views/yspurchase/prepo.vue"],names:[],mappings:"AACA,8BACE,WAAW,AACX,YAAY,AACZ,6BAA6B,AAC7B,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AACtB,6BAA8B,AAClC,mBAAoB,CACrB,AACD,mCACE,YAAY,AACZ,gBAAiB,CAClB,AACD,8BACC,UAAW,CACX,AACD,4BACE,WAAY,AACZ,YAAa,AACb,eAAiB,CAClB,AACD,2BACE,WAAY,AAIZ,sBAAuB,AACnB,6BAA+B,CAGpC,AACD,kDARE,YAAa,AACb,oBAAoB,AACpB,aAAa,AAIb,gBAAkB,CAQnB,AAND,uBACK,gBAAiB,CAKrB,AACD,wBACE,iBAAkB,CACnB,AACD,wCACE,cAAgB,CACjB,AACD,2BACE,WAAY,AACZ,YAAa,AACb,qBAAuB,CACxB,AACD,wBACE,mBAAyB,CAC1B,AACD,2BACE,kBAAmB,AACnB,eAAe,AACf,mBAAoB,CACrB",file:"prepo.vue",sourcesContent:["\n.footer-mark[data-v-24a5e372]{\r\n  width:100%;\r\n  height:40px;\r\n  border-top:1px solid #E4E4E4;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-pack: distribute;\r\n      justify-content: space-around;\r\n  margin-bottom:-10px;\n}\n.footer-mark span[data-v-24a5e372]{\r\n  height:40px;\r\n  line-height: 40px\n}\np.edit[data-v-24a5e372]:hover{\r\n\tcolor:blue;\n}\n.units-box[data-v-24a5e372] {\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t\tbackground: #fff;\n}\n.btns-box[data-v-24a5e372] {\r\n\t\twidth: 100%;\r\n\t\theight: 60px;\r\n\t\tdisplay:-ms-flexbox;\r\n\t\tdisplay:flex;\r\n\t\t-ms-flex-pack: justify;\r\n\t\t    justify-content: space-between;\r\n\t\t\r\n\t\tline-height: 60px;\n}\n.wldw[data-v-24a5e372]{\r\n    \tmargin-left:10px;\r\n    \tdisplay: -ms-flexbox;\r\n    \tdisplay: flex;\r\n    \theight:60px;\r\n    \tline-height: 60px\n}\n.right[data-v-24a5e372]{\r\n\t\tmargin-right:10px;\n}\n.ivu-icon-chevron-down[data-v-24a5e372] {\r\n\t\tfont-size: 10px;\n}\n.btns img[data-v-24a5e372] {\r\n\t\twidth: 14px;\r\n\t\theight: 14px;\r\n\t\tvertical-align: middle;\n}\n.table[data-v-24a5e372] {\r\n\t\tmargin:0 10px 100px 10px;\n}\n.page-box[data-v-24a5e372] {\r\n\t\ttext-align: center;\r\n\t\tmargin-top:2px;\r\n\t\tmargin-bottom:120px;\n}\r\n\t\r\n"],sourceRoot:""}])},2081:function(t,e,a){var i=a(1809);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1191)("18094d84",i,!0)},2341:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"units-box"},[a("div",{staticClass:"btns-box"},[a("div",{staticClass:"wldw"},[a("span",{staticStyle:{width:"60px","font-weight":"900"}},[t._v("采购订单：")]),t._v(" "),a("Select",{staticStyle:{width:"100px","margin-top":"15px","margin-right":"20px"},attrs:{placeholder:"全部"},on:{"on-change":t.orderselected}},t._l(t.orderListname,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" "),a("div",{staticStyle:{"margin-right":"20px",display:"flex"}},[a("Input",{staticStyle:{"margin-top":"15px",width:"300px"},attrs:{placeholder:"请输入编码或名称"},on:{"on-enter":t.enterSearch},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}},[a("span",{staticStyle:{cursor:"pointer"},attrs:{slot:"append"},on:{click:t.search},slot:"append"},[t._v("搜索")])]),t._v(" "),a("a",{staticStyle:{"font-size":"14px","font-weight":"600","margin-left":"20px","border-bottom":"1px solid #3b77e3",height:"40px"},on:{click:t.searchLocation}},[t._v("精准搜索")])],1)],1),t._v(" "),a("div",{staticClass:"right"},[a("Dropdown",{staticStyle:{"margin-left":"4px"},attrs:{trigger:"click"}},[a("Button",{staticStyle:{background:"#ff7d16",color:"#fff",border:"none"},attrs:{shape:"circle",type:"ghost"}},[t._v("更多\n                    "),a("span",[a("i",{staticClass:"ivu-icon ivu-icon-chevron-down"})])]),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("span",{on:{click:t.delcg}},[a("DropdownItem",[t._v("删除")])],1)])],1)],1)]),t._v(" "),a("div",{staticClass:"table"},[a("Table",{ref:"selection",attrs:{border:"","highlight-row":"",columns:t.columns,data:t.dataList},on:{"on-row-dblclick":t.dbl,"on-select":t.selected,"on-row-click":t.clickRow}}),t._v(" "),a("div",{staticClass:"page-box"},[a("Page",{attrs:{total:t.total,"show-total":"",pageSize:t.pageSize},on:{"on-change":t.getData,"on-page-size-change":t.changePageSize}})],1)],1),t._v(" "),a("Modal",{attrs:{width:"420px"},model:{value:t.psisshow,callback:function(e){t.psisshow=e},expression:"psisshow"}},[a("p",{staticStyle:{height:"30px","line-height":"30px","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("精准搜索")])]),t._v(" "),a("Form",{attrs:{"label-width":100}},[a("FormItem",{attrs:{label:"采购单号："}},[a("Input",{model:{value:t.reNo,callback:function(e){t.reNo=e},expression:"reNo"}})],1),t._v(" "),a("FormItem",{attrs:{label:"供应商名称："}},[a("Input",{model:{value:t.supplierName,callback:function(e){t.supplierName=e},expression:"supplierName"}})],1),t._v(" "),a("FormItem",{attrs:{label:"收货人"}},[a("Input",{model:{value:t.deliverName,callback:function(e){t.deliverName=e},expression:"deliverName"}})],1),t._v(" "),a("FormItem",{attrs:{label:"单据日期"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",value:t.poDate,placeholder:"请选择时间"},on:{"on-change":t.shdatepoDate}})],1),t._v(" "),a("FormItem",{attrs:{label:"收货日期"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",value:t.deliveryDate,placeholder:"请选择时间"},on:{"on-change":t.shdate}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"footer-mark"},[a("span",[a("a",{staticStyle:{color:"#999","font-size":"14px"},on:{click:t.cancelSearchLocation}},[t._v("取消")])]),t._v(" "),a("span",{staticStyle:{"font-size":"20px",width:"1px",height:"40px",background:"#e4e4e4"}}),t._v(" "),a("span",[a("a",{staticStyle:{color:"#3B77E3","font-size":"14px"},on:{click:t.sureSearchLocation}},[t._v("确认")])])])])],1)],1)},staticRenderFns:[]}}});