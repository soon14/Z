webpackJsonp([183],{1025:function(t,e,a){a(2072);var i=a(151)(a(1477),a(2359),"data-v-3ec56633",null);t.exports=i.exports},1477:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{searchDate:"",searchDate2:"",cztotal:0,czpageSize:0,crmCZdataList:[],czData:{},crmCZcolumns:[{title:this.$t("data.crm.bdtype"),ellipsis:!0,key:"title"},{title:this.$t("data.crm.code"),ellipsis:!0,key:"crmId"},{title:this.$t("data.crm.Ccode"),ellipsis:!0,key:"crmCode"},{title:this.$t("data.crm.crmName"),ellipsis:!0,key:"crmName"},{title:this.$t("data.crm.cztype"),ellipsis:!0,key:"userDef01"},{title:this.$t("data.crm.czqje"),ellipsis:!0,key:"xfq"},{title:this.$t("data.crm.czMoney"),ellipsis:!0,key:"xfje"},{title:this.$t("data.crm.czhje"),ellipsis:!0,key:"xfh"}],DAYtotal:0,DAYpageSize:0,crmDAYdataList:[],crmDAYcolumns:[{title:"日期",key:"crmCreateTime"},{title:"新增会员数",key:"crmCount"},{title:"会员总数",key:"crmTotal"}],fhlist:[{label:this.$t("data.crm.crmxf"),value:0},{label:this.$t("data.crm.crmcz"),value:1},{label:"会员日报",value:2},{label:"会员统计",value:3}],total:0,pageSize:0,valId:"",type:"",uid:this.$store.state.common.token,fhindex:0,row:{},isLoading:!0,visible:!1,xfData:{},dataList:[],columns:[{title:this.$t("data.crm.bdtype"),key:"title"},{title:this.$t("data.crm.code"),key:"crmId"},{title:this.$t("data.crm.Ccode"),key:"crmCode"},{title:this.$t("data.crm.crmName"),key:"crmName"},{title:this.$t("data.crm.xftype"),key:"userDef01"},{title:this.$t("data.crm.xfqje"),key:"xfq"},{title:this.$t("data.crm.czMoney"),key:"xfje"},{title:this.$t("data.crm.xfhje"),key:"xfh"}],searchDateCRM:"",searchDate2CRM:"",DAYtotalCRM:0,DAYpageSizeCRM:0,crmDAYdataListCRM:[],crmDAYcolumnsCRM:[{title:this.$t("manage.store.Ctime"),key:"crmCreateTime"},{title:this.$t("member.code"),key:"crmCode"},{title:this.$t("member.name"),key:"crmName"},{title:this.$t("member.level"),key:"crmLevel"},{title:"最后下单时间",key:"orderLastDate"},{title:this.$t("member.jf"),key:"crmPoint"},{title:this.$t("member.orderCount"),key:"orderCount"},{title:this.$t("member.orderAmount"),key:"orderAmount"}]}},methods:{searchDate1:function(t){this.searchDate=t},searchDate21:function(t){this.searchDate2=t},dayReportsearch:function(){this.getDAY()},getDAY:function(){var t=this;this.axios.get("statement/crmDayStatement?uid="+this.uid,{params:{beginTime:this.searchDate,endTime:this.searchDate2}}).then(function(e){200==e.data.status&&(t.crmDAYdataList=e.data.rows,t.DAYtotal=e.data.total,t.DAYpageSize=e.data.pageSize)})},DAYgetData:function(t){var e=this;this.axios.get("statement/crmDayStatement?offset="+t+"&uid="+this.uid,{params:{beginTime:this.searchDate,endTime:this.searchDate2}}).then(function(t){200==t.data.status&&(e.crmDAYdataList=t.data.rows,e.DAYtotal=t.data.total,e.DAYpageSize=t.data.pageSize)})},DAYchangePageSize:function(t){this.DAYpageSize=t},getfhlistbg:function(t){this.fhindex=t,0==this.fhindex&&this.getcgList(),1==this.fhindex&&this.getcz(),2==this.fhindex&&this.getDAY(),3==this.fhindex&&this.getDAYCRM()},getcgList:function(){var t=this;this.axios.get("hybb/consum?uid="+this.uid).then(function(e){200==e.data.status&&(t.dataList=e.data.rows,t.total=e.data.total,t.pageSize=e.data.pageSize,t.dataList.forEach(function(t){t.xfq=Math.floor(100*t.xfqje)/100,t.xfh=Math.floor(100*t.xfhje)/100,t.createTime=new Date(t.createTime).toLocaleDateString().replace(/\//g,"-")}))})},clickcz:function(t){this.czData=t},clickxf:function(t){this.xfData=t},cliskImport:function(t){var e=this;0==t&&this.axios.get("/hybb/econsum?uid="+this.uid,{params:{title:this.xfData.title,crmId:this.xfData.crmId,crmCode:this.xfData.crmCode,crmName:this.xfData.crmName,userDef01:this.xfData.userDef01,xfq:this.xfData.xfq,xfje:this.xfData.xfje,xfh:this.xfData.xfh}}).then(function(t){}),1==t&&this.axios.get("/hybb/erecharge?uid="+this.uid,{params:{title:this.czData.title,crmId:this.czData.crmId,crmCode:this.czData.crmCode,crmName:this.czData.crmName,userDef01:this.czData.userDef01,xfq:this.czData.xfq,xfje:this.czData.xfje,xfh:this.czData.xfh}}).then(function(t){}),2==t&&this.axios.get("crmExport/crmExcel?uid="+this.uid,{params:{beginTime:this.searchDate,endTime:this.searchDate2}}).then(function(t){null!=t.data?e.$notify({title:"",message:t.data.errorMessage,type:"error",position:"bottom-right"}):window.location.href=t.request.responseURL})},getcz:function(){var t=this;this.axios.get("hybb/recharge?uid="+this.uid).then(function(e){200==e.data.status&&(t.crmdataList=e.data.rows,t.cztotal=e.data.total,t.czpageSize=e.data.pageSize,t.crmdataList.forEach(function(t){t.xfq=Math.floor(100*t.xfqje)/100,t.xfh=Math.floor(100*t.xfhje)/100,t.createTime=new Date(t.createTime).toLocaleDateString().replace(/\//g,"-")}))})},selected:function(t,e){this.valId=e.id,this.row=e},getData:function(t){var e=this;this.axios.get("/hybb/consum?offset="+t+"&uid="+this.uid).then(function(t){e.dataList=t.data.rows,e.dataList.forEach(function(t){t.xfq=Math.floor(100*t.xfqje)/100,t.xfh=Math.floor(100*t.xfhje)/100,t.createTime=new Date(t.createTime).toLocaleDateString().replace(/\//g,"-")})})},changePageSize:function(t){this.pageSize=t},czgetData:function(t){var e=this;this.axios.get("/hybb/recharge?offset="+t+"&uid="+this.uid).then(function(t){e.czpageSize=t.data.rows,e.czpageSize.forEach(function(t){t.xfq=Math.floor(100*t.xfqje)/100,t.xfh=Math.floor(100*t.xfhje)/100,t.createTime=new Date(t.createTime).toLocaleDateString().replace(/\//g,"-")})})},czchangePageSize:function(t){this.czpageSize=t},searchDate1CRM:function(t){this.searchDateCRM=t},searchDate21CRM:function(t){this.searchDate2CRM=t},dayReportsearchCRM:function(){this.getDAYCRM()},getDAYCRM:function(){var t=this;this.axios.get("/statement/ynCrmStatement?uid="+this.uid,{params:{beginTime:this.searchDateCRM,endTime:this.searchDate2CRM}}).then(function(e){200==e.data.status&&(t.crmDAYdataListCRM=e.data.rows,t.DAYtotalCRM=e.data.total,t.DAYpageSizeCRM=e.data.pageSize)})},DAYgetDataCRM:function(t){var e=this;this.axios.get("/statement/ynCrmStatement?offset="+t+"&uid="+this.uid,{params:{beginTime:this.searchDateCRM,endTime:this.searchDate2CRM}}).then(function(t){200==t.data.status&&(e.crmDAYdataListCRM=t.data.rows,e.DAYtotalCRM=t.data.total,e.DAYpageSizeCRM=t.data.pageSize)})},DAYchangePageSizeCRM:function(t){this.DAYpageSizeCRM=t},cliskImportCRM:function(){var t=this;this.axios.get("/crmExport/crm?uid="+this.uid,{params:{beginTime:this.searchDateCRM,endTime:this.searchDate2CRM}}).then(function(e){null!=e.data?t.$notify({title:"",message:e.data.errorMessage,type:"error",position:"bottom-right"}):window.location.href=e.request.responseURL})},getBdate:function(){var t=new Date,e=t-2592e6;return new Date(e)},getDATE:function(){var t=new Date;this.searchDate2=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),this.searchDate2CRM=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}},mounted:function(){this.getcgList(),this.getDATE(),this.searchDate=this.getBdate(),this.searchDateCRM=this.getBdate()}}},1775:function(t,e,a){e=t.exports=a(1015)(),e.push([t.i,"p.edit[data-v-3ec56633]:hover{color:blue}.units-box[data-v-3ec56633]{width:100%;height:100%;background:#e6e9ec}.btns-box[data-v-3ec56633]{width:100%;height:50px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;background:#fff;line-height:50px}.wldw[data-v-3ec56633]{margin-left:15px}.right[data-v-3ec56633]{margin-right:10px;margin-bottom:10px}.ivu-icon-chevron-down[data-v-3ec56633]{font-size:10px}.btns img[data-v-3ec56633]{width:14px;height:14px;vertical-align:middle}.main-left[data-v-3ec56633]{width:120px;margin-right:3px;-ms-flex:0 0 120px;flex:0 0 120px;font-size:14px;background:#fff}.main-left li[data-v-3ec56633]{list-style:none;padding:10px 0;width:100%}.main-left li span[data-v-3ec56633]{margin-left:20px}.table[data-v-3ec56633]{width:100%;height:100%;background:#fff;overflow:auto}.bor[data-v-3ec56633]{background:#ebf1fc}.page-box[data-v-3ec56633]{text-align:center;margin-top:2px;margin-bottom:120px}","",{version:3,sources:["C:/Users/cxy/Desktop/zsydian/src/views/data/crm/crmreport.vue"],names:[],mappings:"AACA,8BACC,UAAW,CACX,AACD,4BACE,WAAY,AACZ,YAAY,AACZ,kBAA4B,CAC7B,AACD,2BACE,WAAY,AACZ,YAAa,AACb,oBAAoB,AACpB,aAAa,AACb,sBAAuB,AACnB,8BAA+B,AACnC,gBAAiB,AACjB,gBAAkB,CACnB,AACD,uBACK,gBAAiB,CACrB,AACD,wBACE,kBAAkB,AAClB,kBAAmB,CACpB,AACD,wCACE,cAAgB,CACjB,AACD,2BACE,WAAY,AACZ,YAAa,AACb,qBAAuB,CACxB,AACD,4BACE,YAAa,AACb,iBAAkB,AAClB,mBAAoB,AAChB,eAAgB,AACpB,eAAgB,AAChB,eAAiB,CAClB,AACD,+BACE,gBAAiB,AACjB,eAAe,AACf,UAAW,CACZ,AACD,oCACE,gBAAiB,CAClB,AACD,wBACE,WAAY,AACZ,YAAa,AACb,gBAAiB,AACjB,aAAe,CAChB,AACD,sBACE,kBAAmB,CACpB,AACD,2BACE,kBAAmB,AACnB,eAAe,AACd,mBAAoB,CACtB",file:"crmreport.vue",sourcesContent:["\np.edit[data-v-3ec56633]:hover{\r\n\tcolor:blue;\n}\n.units-box[data-v-3ec56633] {\r\n\t\twidth: 100%;\r\n\t\theight:100%;\r\n\t\tbackground: rgb(230,233,236)\n}\n.btns-box[data-v-3ec56633] {\r\n\t\twidth: 100%;\r\n\t\theight: 50px;\r\n\t\tdisplay:-ms-flexbox;\r\n\t\tdisplay:flex;\r\n\t\t-ms-flex-pack: justify;\r\n\t\t    justify-content: space-between;\r\n\t\tbackground: #fff;\r\n\t\tline-height: 50px;\n}\n.wldw[data-v-3ec56633]{\r\n    \tmargin-left:15px;\n}\n.right[data-v-3ec56633]{\r\n\t\tmargin-right:10px;\r\n\t\tmargin-bottom:10px;\n}\n.ivu-icon-chevron-down[data-v-3ec56633] {\r\n\t\tfont-size: 10px;\n}\n.btns img[data-v-3ec56633] {\r\n\t\twidth: 14px;\r\n\t\theight: 14px;\r\n\t\tvertical-align: middle;\n}\n.main-left[data-v-3ec56633]{\r\n\t\twidth: 120px;\r\n\t\tmargin-right: 3px;\r\n\t\t-ms-flex: 0 0 120px;\r\n\t\t    flex: 0 0 120px;\r\n\t\tfont-size: 14px;\r\n\t\tbackground: #fff;\n}\n.main-left li[data-v-3ec56633]{\r\n\t\tlist-style: none;\r\n\t\tpadding:10px 0;\r\n\t\twidth:100%;\n}\n.main-left li span[data-v-3ec56633]{\r\n\t\tmargin-left:20px;\n}\n.table[data-v-3ec56633] {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground: #fff;\r\n\t\toverflow: auto;\n}\n.bor[data-v-3ec56633]{\r\n\t\tbackground: #EBF1FC\n}\n.page-box[data-v-3ec56633] {\r\n\t\ttext-align: center;\r\n\t\tmargin-top:2px;\r\n\t\t margin-bottom:120px;\n}\r\n\t\r\n"],sourceRoot:""}])},2072:function(t,e,a){var i=a(1775);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1016)("b32d6180",i,!0)},2359:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"units-box"},[a("div",{staticStyle:{display:"flex",height:"100%"}},[a("div",{staticClass:"main-left"},[a("div",{staticStyle:{display:"flex","border-bottom":"1px solid #e4e4e4"}},[a("span",{staticStyle:{height:"50px","font-size":"18px","font-weight":"900","line-height":"50px"}},[a("div",{staticStyle:{margin:"0 10px"}},[t._v(t._s(t.$t("sideBar.store.member")))])])]),t._v(" "),t._l(t.fhlist,function(e,i){return a("li",{key:i,staticClass:"flclass",class:{bor:i==t.fhindex},on:{click:function(e){t.getfhlistbg(i)}}},[a("span",[t._v(t._s(e.label))])])})],2),t._v(" "),0==t.fhindex?a("div",{staticClass:"table"},[a("div",{staticStyle:{display:"flex","justify-content":"space-between","border-bottom":"1px solid #e4e4e4"}},[a("span",{staticStyle:{height:"50px","font-size":"18px","font-weight":"900","line-height":"50px"}},[a("div",{staticStyle:{margin:"0 10px"}},[t._v(t._s(t.$t("data.crm.crmxf")))])]),t._v(" "),a("div")]),t._v(" "),a("div",{staticStyle:{padding:"10px"}},[a("Table",{attrs:{border:"","highlight-row":"",columns:t.columns,data:t.dataList},on:{"on-row-click":t.clickxf}}),t._v(" "),a("div",{staticClass:"page-box"},[a("Page",{attrs:{total:t.total,"show-total":"",size:"small",pageSize:t.pageSize},on:{"on-change":t.getData,"on-page-size-change":t.changePageSize}})],1)],1)]):t._e(),t._v(" "),1==t.fhindex?a("div",{staticClass:"table"},[a("div",{staticStyle:{display:"flex","justify-content":"space-between","border-bottom":"1px solid #e4e4e4"}},[a("span",{staticStyle:{height:"50px","font-size":"18px","font-weight":"900","line-height":"50px"}},[a("div",{staticStyle:{margin:"0 10px"}},[t._v(t._s(t.$t("data.crm.crmcz")))])]),t._v(" "),a("div")]),t._v(" "),a("div",{staticStyle:{padding:"10px"}},[a("Table",{attrs:{border:"","highlight-row":"",columns:t.crmCZcolumns,data:t.crmCZdataList},on:{"on-row-click":t.clickcz}}),t._v(" "),a("div",{staticClass:"page-box"},[a("Page",{attrs:{total:t.cztotal,"show-total":"",size:"small",pageSize:t.czpageSize},on:{"on-change":t.czgetData,"on-page-size-change":t.czchangePageSize}})],1)],1)]):t._e(),t._v(" "),2==t.fhindex?a("div",{staticClass:"table"},[a("div",{staticStyle:{display:"flex","justify-content":"space-between","border-bottom":"1px solid #e4e4e4"}},[a("div",{staticStyle:{display:"flex",height:"50px","line-height":"50px"}},[a("div",{staticStyle:{margin:"0 10px","font-size":"18px","font-weight":"900"}},[t._v("会员日报")]),t._v(" "),a("span",{staticStyle:{"text-align":"right",width:"100px"}},[t._v(t._s(t.$t("sales.quotation.startTime"))+"：")]),t._v(" "),a("DatePicker",{staticStyle:{width:"160px","margin-top":"10px"},attrs:{type:"date",value:t.searchDate,placeholder:"Start time"},on:{"on-change":t.searchDate1}}),t._v(" "),a("span",{staticStyle:{"margin-left":"6px"}},[t._v(t._s(t.$t("sales.quotation.endTime"))+"：")]),t._v(" "),a("DatePicker",{staticStyle:{width:"160px","margin-top":"10px"},attrs:{type:"date",value:t.searchDate2,placeholder:"End time"},on:{"on-change":t.searchDate21}}),t._v(" "),a("div",{staticStyle:{"margin-left":"5px",color:"#fff"}},[a("Button",{attrs:{type:"primary",shape:"circle"},on:{click:t.dayReportsearch}},[a("Icon",{staticStyle:{"margin-right":"5px",color:"#fff"},attrs:{type:"ios-search"}}),t._v(t._s(t.$t("public.search"))+"\n\t\t\t\t\t\t")],1)],1)],1),t._v(" "),a("div",[a("Button",{staticStyle:{"margin-top":"10px","margin-right":"10px"},attrs:{type:"primary",shape:"circle"},on:{click:function(e){t.cliskImport(2)}}},[a("Icon",{staticStyle:{"margin-right":"5px",color:"#fff"},attrs:{type:"plus-round"}}),t._v("导出\n\t\t\t\t\t")],1)],1)]),t._v(" "),a("div",{staticStyle:{padding:"10px"}},[a("Table",{attrs:{border:"","highlight-row":"",columns:t.crmDAYcolumns,data:t.crmDAYdataList}}),t._v(" "),a("div",{staticClass:"page-box"},[a("Page",{attrs:{total:t.DAYtotal,"show-total":"",size:"small",pageSize:t.DAYpageSize},on:{"on-change":t.DAYgetData,"on-page-size-change":t.DAYchangePageSize}})],1)],1)]):t._e(),t._v(" "),3==t.fhindex?a("div",{staticClass:"table"},[a("div",{staticStyle:{display:"flex","justify-content":"space-between","border-bottom":"1px solid #e4e4e4"}},[a("span",{staticStyle:{display:"flex",height:"50px","line-height":"50px"}},[a("div",{staticStyle:{margin:"0 10px","font-size":"18px","font-weight":"900"}},[t._v("会员统计")]),t._v(" "),a("div",{staticStyle:{display:"flex","line-height":"50px"}},[a("span",{staticStyle:{"text-align":"right",width:"100px"}},[t._v(t._s(t.$t("sales.quotation.startTime"))+"：")]),t._v(" "),a("DatePicker",{staticStyle:{width:"160px","margin-top":"10px"},attrs:{type:"date",value:t.searchDateCRM,placeholder:"Start time"},on:{"on-change":t.searchDate1CRM}}),t._v(" "),a("span",{staticStyle:{"margin-left":"6px"}},[t._v(t._s(t.$t("sales.quotation.endTime"))+"：")]),t._v(" "),a("DatePicker",{staticStyle:{width:"160px","margin-top":"10px"},attrs:{type:"date",value:t.searchDate2CRM,placeholder:"End time"},on:{"on-change":t.searchDate21CRM}}),t._v(" "),a("div",{staticStyle:{"margin-left":"5px",color:"#fff"}},[a("Button",{attrs:{type:"primary",shape:"circle"},on:{click:t.dayReportsearchCRM}},[a("Icon",{staticStyle:{"margin-right":"5px",color:"#fff"},attrs:{type:"ios-search"}}),t._v(t._s(t.$t("public.search"))+"\n\t\t\t\t\t\t\t")],1)],1)],1)]),t._v(" "),a("div",[a("Button",{staticStyle:{"margin-top":"10px","margin-right":"10px"},attrs:{type:"primary",shape:"circle"},on:{click:t.cliskImportCRM}},[a("Icon",{staticStyle:{"margin-right":"5px",color:"#fff"},attrs:{type:"checkmark-round"}}),t._v("\n\t\t\t\t\t "+t._s(t.$t("public.export"))+"\n\t\t\t\t\t")],1)],1)]),t._v(" "),a("div",{staticStyle:{padding:"10px"}},[a("Table",{attrs:{border:"","highlight-row":"",columns:t.crmDAYcolumnsCRM,data:t.crmDAYdataListCRM}}),t._v(" "),a("div",{staticClass:"page-box"},[a("Page",{attrs:{total:t.DAYtotalCRM,"show-total":"",size:"small",pageSize:t.DAYpageSizeCRM},on:{"on-change":t.DAYgetDataCRM,"on-page-size-change":t.DAYchangePageSizeCRM}})],1)],1)]):t._e()])])},staticRenderFns:[]}}});