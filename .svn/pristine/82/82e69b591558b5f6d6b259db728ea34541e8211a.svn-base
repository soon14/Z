<template>
	<div class='navigationHome'>
		<div class='head'>
			<div class='left'>
				<img src="http://img.zsydian.com/icon/navigation_step_logo.png" width='48' height='48'>
				<div class='zsys'>
					<span>智胜云店</span>
					<span style='font-size:12px;font-weight:100;'>zhiShengYunDian</span>
				</div>
			</div>
			<div class='right'>
				<span>· 初始化导览 ·</span>
			</div>
		</div>
		<!--main-->
		<div class='main'>
			<div class='main-left'>
				<div >
					<Steps :current="active" direction="vertical"><!--@click='clickActive1'-->
				        <div  style='cursor:pointer'><Step title="商品分类" ></Step><i></i></div>
				       	<div  style='cursor:pointer'><Step title="商品规格"></Step><i></i></div>
				        <div  style='cursor:pointer'><Step title="添加商品"></Step><i></i></div>
				        <div  style='cursor:pointer'><Step title="添加客户"></Step><i></i></div>
				        <div  style='cursor:pointer'><Step title="初始化完成"></Step></div>
				    </Steps>
				</div>
			</div>

			<div class='main-right' >
				<!--商品分类-->
				<div v-if='active==0'>
					<div class='main-right-head'>
						<div>
							<span style='font-size:14px;font-weight:600;margin-left:20px'>添加商品分类</span>

					    </div>
						<div style='margin-left:40px;margin-right:20px'>
							<Button type="primary" style='background:#3b77e3' shape="circle" @click="addClass">
							 <Icon type="plus-round" style="margin-right:5px;color:#fff"></Icon>{{$t('public.addnewLevle1')}}
						</Button>
			            </div>
					</div>
					<div style='width:98%;margin:10px auto;overflow:auto;height:100%'>
						<div>
				            <ul>
				                <ul class='levelTitle'>
				                    <li v-for='(item,index) in AllflTitle' :key='index' style='margin-left: -50px;font-size:14px;font-weight:600'>{{item}}</li>
				                </ul>
				                <div v-if='Allfl.length==0' class='noDataTxt'>{{$t('public.NoData')}}</div>
				                <li v-for='(item,index) in Allfl' :key='index' v-else>
				                    <div>
				                        <ul class='level1ul'>
				                            <li class='level1Name'>
				                                <span class='crow' @click='clickAdd(item,index)' v-if='!item._check'>+</span>
				                                <span class='crow' @click='clickReduce(item,index)' v-if='item._check'>-</span>
				                                <div class='editInput' @focus='level1focus(item,index)' @blur='level1Blur(item,index)' contenteditable="true">{{item.title}}</div>
				                            </li>
				                            <a class='level1A'>
				                                <img :src='item.icon'/>
				                            </a>
				                            <div class='action'>
				                                <a @click='EditLevel1(item)'>修改</a>
				                                <a @click='delLevel1(item)'>删除</a>
				                                <a @click='addlevel2(item)'>添加子分类</a>
				                            </div>
				                        </ul>
				                        <div>
				                            <li v-for='(i,n) in item.children' :key='n' v-if='item._check'>
				                                <div>
				                                    <ul class='level1ul'>
				                                        

				                                        <li class='level2NameT'>
				                                            <span class='crow' @click='clickSubAdd(item,index)' v-if='!i._check'>+</span>
				                                            <span class='crow' @click='clickSubReduce(item,index)' v-if='i._check'>-</span>
				                                            <div class='level2Name' @focus='level2focus(i,item,n)' @blur='level2Blur(i,item,n)' contenteditable="true">{{i.title}}</div>
				                                        </li>
				                                        <a class='level1A level1B'>
				                                            <img :src='i.icon'/>
				                                           
				                                        </a>
				                                        <div class='action'>
				                                            <a @click.stop='EditLevel2(i)'>修改</a>
				                                            <a @click='delLevel2(i)'>删除</a>
				                                            <a @click='addlevel3(i)'>添加子分类</a>
				                                        </div>
				                                    </ul>
				                                    <div>
				                                        <li v-for='(j,m) in i.children' :key='index'>
				                                            <div>
				                                                <ul class='level1ul'>
				                                                    <li class='level3NameT ' >
				                                                        <span class='crow' @click='clickSub3Add(item,index)' v-if='!j._check'>+</span>
				                                                         <span class='crow' @click='clickSub3Reduce(item,index)' v-if='j._check'>-</span>
				                                                        <div class='level3Name' @focus='level3focus(j,i,item,m)' @blur='level3Blur(j,i,item,m)' contenteditable="true">{{j.title}}</div>
				                                                    </li>
				                                                    <a class='level1A level1C'><img :src='j.icon' /></a>
				                                                    <div class='action'>
				                                                        <a @click.stop='EditLevel3(j)'>修改</a>
				                                                        <a @click='delLevel3(j)'>删除</a>
				                                                    </div>
				                                                </ul>
				                                            </div>
				                                        </li>
				                                    </div>
				                                </div>
				                            </li>
				                        </div>
				                    </div>
				                </li>
				            </ul>
				            <div style='margin-top:10px' class='page-box'>
								<Page :total="totalfl" size='small' show-total  :pageSize='pageSizefl'  @on-change="getDatafl" @on-page-size-change="changePageSizefl"></Page>
							</div>
				        </div>
					</div>
					<div class='bottom-btn'>
						<Button type="primary" shape="circle" @click="skip" style='background:#fff;color:#448AFF;font-size:20px;margin-right:10px;border-width:2px;width:130px'>
							跳过
						</Button>

						<Button type="primary" shape="circle" @click="clickOne" style=';color:#fff;font-size:20px;border:none;width:130px'>
							下一步
						</Button>
					</div>
				</div>
				<!--商品规格-->
				<div v-if='active==1'>
					<div class='main-right-head'>
						<div>
							<span style='font-size:14px;font-weight:600;margin-left:20px'>添加商品规格</span>

					    </div>
						<div style='margin-left:40px;margin-right:20px'>

							
							<Button type="primary" style='background:#3b77e3' shape="circle" @click="addattrs">
								 <Icon type="plus-round" style="margin-right:5px;color:#fff"></Icon>{{$t('public.addnew')}}
							</Button>
						
			            </div>
					</div>
					<div>
						<!--商品规格表格-->
						<div style='width:98%;margin:10px auto'>

							<Table border  stripe ellipsis  :columns="columns" :data="dataList"></Table>

						</div>
					</div>
					<div class='bottom-btn'>
						<Button type="primary" shape="circle" @click="skip" style='background:#fff;color:#448AFF;font-size:20px;margin-right:10px;border-width:2px;width:130px'>
							跳过
						</Button>
						<Button type="primary" shape="circle" @click="clickTwoPre" style='background:#ccc;color:#fff;font-size:20px;margin-right:10px;border:none;width:130px'>
							上一步
						</Button>
						<Button type="primary" shape="circle" @click="clickTwo" style=';color:#fff;font-size:20px;border:none;width:130px'>
							下一步
						</Button>
					</div>
				</div>
				<!--添加商品-->
				<div v-if='active==2'>
					<div class='main-right-head'>
						<div>
							<span style='font-size:14px;font-weight:600;margin-left:20px'>添加商品</span>

					    </div>
						<div style='margin-left:40px;margin-right:20px'>

							<Button type="primary" shape="circle" @click="addGoods" style='border:none'>
								 <Icon type="plus-round" style="margin-right:5px;color:#fff"></Icon>新增
							</Button>
							<Button type="primary" shape="circle" @click="SkustoreImport" style='border:none'>
								 <Icon type="plus-round" style="margin-right:5px;color:#fff"></Icon>导入
							</Button>
			            </div>
					</div>
					<div>
					<!--商品表格-->
					<div style='width:98%;margin:10px auto'>

						<Table border  ref="selection" :columns="goodskey" :data="goods"></Table>
						<div style='margin-top:10px' class='page-box'>
							<Page :total="totalSku" size='small' show-total  :pageSize='pageSizeSku'  @on-change="getDataSku" @on-page-size-change="changePageSizeSku"></Page>
						</div>
					</div>
					</div>
					<div class='bottom-btn'>
						<Button type="primary" shape="circle" @click="skip" style='background:#fff;color:#448AFF;font-size:20px;margin-right:10px;border-width:2px;width:130px'>
							跳过
						</Button>
						<Button type="primary" shape="circle" @click="clickThreePre" style='background:#ccc;color:#fff;font-size:20px;margin-right:10px;border:none;width:130px'>
							上一步
						</Button>
						<Button type="primary" shape="circle" @click="clickThree" style=';color:#fff;font-size:20px;border:none;width:130px'>
							下一步
						</Button>
					</div>
				</div>
				<!--添加客户-->
				<div v-if='active==3'>
					<div class='main-right-head'>
						<div>
							<span style='font-size:14px;font-weight:600;margin-left:20px'>添加客户</span>

					    </div>
						<div style='margin-left:40px;margin-right:20px'>

							<Button type="primary" shape="circle" @click="addkh">
						 	<Icon type="plus-round" style="margin-right:5px;color:#fff"></Icon>新增
							</Button>
							<Button type="primary" shape="circle" @click="khstoreImport" style='border:none'>
								 <Icon type="plus-round" style="margin-right:5px;color:#fff"></Icon>导入
							</Button>
			            </div>
					</div>
					<div>
					<!--客户表格-->
					<div style='width:98%;margin:10px auto'>
						<Table border :columns="khkey" :data="khdataList" ></Table>
					</div>
					</div>
					<div class='bottom-btn'>
						<Button type="primary" shape="circle" @click="skip" style='background:#fff;color:#448AFF;font-size:20px;margin-right:10px;border-width:2px;width:130px'>
							跳过
						</Button>
						<Button type="primary" shape="circle" @click="clickFourPre" style='background:#ccc;color:#fff;font-size:20px;margin-right:10px;border:none;width:130px'>
							上一步
						</Button>
						<Button type="primary" shape="circle" @click="clickFour" style=';color:#fff;font-size:20px;border:none;width:130px'>
							下一步
						</Button>
					</div>
				</div>
				<!--初始化 请您稍等，初始化正在进行中-->
				<div v-if='active==4' style='width:100%;height:100%'>
					<div style='width:100%;position:relative;height:600px'>
						<div v-if='colorIsshow' style='width:100%;position:relative;height:100%'>
						<!-- 	<Spin>
				                <Icon type="load-c" size=128 class="demo-spin-icon-load" style='margin-bottom:20px'></Icon>
				                <div style='font-size:20px'>请您稍等，初始化正在进行中</div>
				            </Spin> -->
				            <Spin fix>
                            <mu-icon value="rotate_right" size='125' color="blue"  class="demo-spin-icon-load1"></mu-icon>
                            
                            <div style='font-size:20px'>请您稍等，初始化正在进行中...</div>
                        </Spin>
			            </div>
			            <div v-else class='dlsuccess'>
			            	<Icon type="checkmark-circled" size=128 style='color:#2D8CF0;margin-bottom:20px'></Icon>
			            	<span style='font-size:20px;color:#2D8CF0'>感谢您的耐心配合，初始化已完成</span>
			            </div>
					</div>
					<div class='bottom-btn'>
						<Button type="primary" shape="circle" @click="" style='background:#ccc;color:#fff;font-size:20px;margin-right:10px;border:none;width:180px'v-if='colorIsshow'>
							<span >进入智胜云商</span>
						</Button>
						<Button type="primary" shape="circle" @click="skip" style=';color:#fff;font-size:20px;margin-right:10px;border:none;width:180px'v-if='!colorIsshow'>
							<span >进入智胜云商</span>
						</Button>
					</div>
				</div>
			</div>

		</div>
			<!--新建商品分类弹出框-->
	<!--新建一级分类-->
	<Modal v-model="skuclassisshow" width="460px">
            <p slot="header" style="height:30px;line-height:30px">
                <span v-if='level1Editisshow'>{{$t('public.addnewLevle1')}}</span>
                <span v-if='!level1Editisshow'>{{$t('public.editnewLevle1')}}</span>
            </p>
            <Row>
            <Col span="4">
                    <div class='right-left'>
                        <el-upload
                          class="avatar-uploader"
                         :action="logoUrl"
                            name='file'
                          :show-file-list="false"
                          :on-success="addClassImgSuccess"
                          accept="image/*"
                          >
                          <img v-if="skuclassphoto" :src="skuclassphoto" class="avatar" width='80' height='80'>
                          <i v-else class="el-icon-plus avatar-uploader-icon"></i>
                        </el-upload>
                    </div>
                </Col>
                <Col span="20">
                    <Form ref="formValidateskuclass" :model="formValidateskuclass" :rules="ruleValidateskuclass" :label-width="140" v-if='level1Editisshow'>
                        <div style='margin-top:40px'>
                            <FormItem :label="$t('manage.setting.classname')" prop="skuclassName">
                                <Input v-model='formValidateskuclass.skuclassName'></Input>
                            </FormItem>
                        </div>
                    </Form>
                    <Form ref="formValidateskuclassE" :model="formValidateskuclass" :rules="ruleValidateskuclass" :label-width="140" v-if='!level1Editisshow'>
                        <div style='margin-top:40px'>
                            <FormItem :label="$t('manage.setting.classname')" prop="skuclassName">
                                <Input v-model='formValidateskuclass.skuclassName'></Input>
                            </FormItem>
                        </div>
                    </Form>
                </Col>
            </Row>
            <div slot="footer">
                <div class='title'>
                    <div style='color:#D15151;font-size:14px'>
                        </div>
                    <div style='margin-top:10px'>
                    	<Button shape="circle" type="ghost" style="display:inline-block;background:#ACACAC;border:none;color:#fff" @click='cancelClassLevel1'><Icon type="close" style="margin-right:5px;" ></Icon>{{$t('public.cancel')}}</Button>
                        <Button type="primary" style='background:#3b77e3' shape="circle" @click="saveClassLevel1('formValidateskuclass')" v-if='level1Editisshow'>
                             <Icon type="plus-round" style="margin-right:5px;color:#fff"></Icon>{{$t('public.SaveBtn')}}
                        </Button>
                        <Button type="primary" style='background:#40ca98;border:none' shape="circle" @click="EditClassLevel1('formValidateskuclassE')" v-if='!level1Editisshow'>
                              <i class="el-icon-edit" style=";margin-right:5px;"></i>{{$t('public.EditBtn')}}
                        </Button>
                    </div>
                </div>
            </div>
    </Modal>
    <!--添加二级分类-->
    <Modal v-model="level2Ml" width="460px">
        <p slot="header" style="height:30px;line-height:30px">
            <span v-if='level2Editisshow'>{{$t('public.classlevel2')}}</span><!--添加二级分类-->
            <span v-if='!level2Editisshow'>{{$t('public.editeditclasslevel2')}}</span><!--修改二级分类-->
        </p>
        <Row>
        <Col span="4">
                <div class='right-left'>
                    <el-upload
                      class="avatar-uploader"
                     :action="logoUrl"
                        name='file'
                      :show-file-list="false"
                      :on-success="addlevel2Success"
                      accept="image/*"
                      >
                      <img v-if="level2photo" :src="level2photo" class="avatar" width='80' height='80'>
                      <i v-else class="el-icon-plus avatar-uploader-icon"></i>
                    </el-upload>
                </div>
            </Col>
            <Col span="20">
                <Form ref="level2class" :model="level2class" :rules="level2ruleclass" :label-width="140" v-if='level2Editisshow'>
                    <div style='margin-top:40px'>
                        <FormItem :label="$t('manage.setting.classname')" prop="level2Name">
                            <Input v-model='level2class.level2Name'></Input>
                        </FormItem>
                    </div>
                </Form>
                <Form ref="Elevel2class" :model="level2class" :rules="level2ruleclass" :label-width="140" v-if='!level2Editisshow'>
                    <div style='margin-top:40px'>
                        <FormItem :label="$t('manage.setting.classname')" prop="level2Name">
                            <Input v-model='level2class.level2Name'></Input>
                        </FormItem>
                    </div>
                </Form>
            </Col>
        </Row>
        <div slot="footer">
           
            <div class='title'>
                <div style='color:#D15151;font-size:14px'>
                    </div>
                <div style='margin-top:10px'>
                	<Button shape="circle" type="ghost" style="display:inline-block;background:#ACACAC;border:none;color:#fff" @click='cancelClassLevel2'><Icon type="close" style="margin-right:5px;" ></Icon>{{$t('public.cancel')}}</Button>
                    <Button type="primary" style='background:#3b77e3' shape="circle" @click="saveClassLevel2('level2class')" v-if='level2Editisshow'>
                         <Icon type="plus-round" style="margin-right:5px;color:#fff">
                         </Icon>{{$t('public.SaveBtn')}}
                    </Button>
                    <Button type="primary" style='background:#40ca98;border:none' shape="circle" @click="EditClassLevel2('Elevel2class')" v-if='!level2Editisshow'>
                          <i class="el-icon-edit" style=";margin-right:5px;"></i>{{$t('public.EditBtn')}}
                    </Button>
                </div>
            </div>
        </div>
    </Modal>
    <!--添加三级分类-->
    <Modal v-model="level3Ml" width="460px">
        <p slot="header" style="height:30px;line-height:30px">
            <span v-if='level3Editisshow'>{{$t('public.classlevel3')}}</span><!--添加三级分类-->
            <span v-if='!level3Editisshow'>{{$t('public.editclasslevel3')}}</span><!--添加三级分类-->
        </p>
        <Row>
        <Col span="4">
                <div class='right-left'>
                    <el-upload
                      class="avatar-uploader"
                     :action="logoUrl"
                        name='file'
                      :show-file-list="false"
                      :on-success="addlevel3Success"
                      accept="image/*"
                      >
                      <img v-if="level3photo" :src="level3photo" class="avatar" width='80' height='80'>
                      <i v-else class="el-icon-plus avatar-uploader-icon"></i>
                    </el-upload>
                </div>
            </Col>
            <Col span="20">
                <Form ref="level3class" :model="level3class" :rules="level3ruleclass" :label-width="140" v-if='level3Editisshow'>
                    <div style='margin-top:40px'>
                        <FormItem :label="$t('manage.setting.classname')" prop="level3Name">
                            <Input v-model='level3class.level3Name'></Input>
                        </FormItem>
                    </div>
                </Form>
                <Form ref="level3classE" :model="level3class" :rules="level3ruleclass" :label-width="140" v-if='!level3Editisshow'>
                    <div style='margin-top:40px'>
                        <FormItem :label="$t('manage.setting.classname')" prop="level3Name">
                            <Input v-model='level3class.level3Name'></Input>
                        </FormItem>
                    </div>
                </Form>
            </Col>
        </Row>
        <div slot="footer">
            <div class='title'>
                <div style='color:#D15151;font-size:14px'>
                    </div>
                <div style='margin-top:10px'>
                	<Button shape="circle" type="ghost" style="display:inline-block;background:#ACACAC;border:none;color:#fff" @click='cancelClassLevel3'><Icon type="close" style="margin-right:5px;" ></Icon>{{$t('public.cancel')}}</Button>
                    <Button type="primary" style='background:#3b77e3' shape="circle" @click="saveClassLevel3('level3class')" v-if='level3Editisshow'>
                         <Icon type="plus-round" style="margin-right:5px;color:#fff">
                         </Icon>{{$t('public.SaveBtn')}}
                    </Button>
                    <Button type="primary" style='background:#40ca98;border:none' shape="circle" @click="EditClassLevel3('level3classE')" v-if='!level3Editisshow'>
                          <i class="el-icon-edit" style=";margin-right:5px;"></i>{{$t('public.EditBtn')}}
                    </Button>
                </div>
            </div>
        </div>
    </Modal>

	<!--{{$t('public.addnew')}}属性弹出框-->
	<Modal v-model="attrsisshow" width="660px">
		<p slot="header" style="height:30px;line-height:30px">

			<span>{{$t('public.addnew')}}</span><!--属性-->
		</p>
		<div style='margin-bottom:-30px;margin-left:-50px'>
			<Form ref="formValidateattr" :model="formValidateattr" :rules="ruleValidateattr" :label-width="100" v-if='sx'>
				<FormItem :label="$t('manage.setting.ckname')" prop="attrName">
                    <Input v-model="formValidateattr.attrName" :placeholder="$t('manage.setting.ckname')"></Input>
                </FormItem>
			</Form>
			<Form ref="formValidateattrE" :model="formValidateattr" :rules="ruleValidateattr" :label-width="100" v-if='!sx'>
				<FormItem :label="$t('manage.setting.ckname')" prop="attrName">
                    <Input v-model="formValidateattr.attrName" :placeholder="$t('manage.setting.ckname')"></Input>
                </FormItem>
			</Form>
		</div>
		<div slot="footer">
			<!--属性表格-->
			<Table  border height='300' :columns="attrkey" :data="attrdata" >
			</Table>
			<div class='title'>
				<div style='color:#D15151;font-size:14px'>
					</div>
				<div style='margin-top:10px'>
					<Button shape="circle" type="ghost" style="display:inline-block;background:#ACACAC;border:none;color:#fff" @click='acancel'><Icon type="close" style="margin-right:5px;" ></Icon>{{$t('public.cancel')}}</Button>
					<Button shape="circle" type="ghost" style="display:inline-block;background:#3b77e3;color:#fff" @click="addattrssure('formValidateattr')" v-if='sx'><Icon type="checkmark-round" style=";margin-right:5px;color:#fff"></Icon>
					{{$t('public.sure')}}</Button>
					<Button shape="circle" type="ghost" style="display:inline-block;background:#40ca98;color:#fff" @click="editattrssure('formValidateattrE')" v-if='!sx'><i class="el-icon-edit" style=";margin-right:5px;"></i>{{$t('public.EditBtn')}}</Button>
				</div>
			</div>
		</div>
	</Modal>

		<!--添加属性弹出框-->
	<Modal v-model="atisshow" width="460px">
		<p slot="header" style="height:30px;line-height:30px">

			<span>{{$t('public.addnew')}}</span>
		</p>
		<div style=';display:flex;height:40px;line-height:35px'>
			<span style='width:40px'>{{$t('manage.setting.ckname')}}：</span><Input v-model='attrName1'></Input><!--名称-->
		</div>
		<div style=';margin-top:10px;display:flex;height:40px;line-height:35px'>
			<span style='width:40px'>{{$t('manage.setting.sq')}}：</span><Input v-model='code'></Input>
		</div>
		<div style=';margin-top:10px;display:flex;height:40px;line-height:35px'>
			<span style='width:40px'>{{$t('manage.sku.attrsq')}}：</span><Input v-model='sequence' number></Input>
		</div>
		<div slot="footer">

			<div class='title'>
				<div style='color:#D15151;font-size:14px'>
					</div>
				<div style='margin-top:10px'>
					<Button shape="circle" type="ghost" style="display:inline-block;background:#ACACAC;border:none;color:#fff" @click='ggcancel'><Icon type="close" style="margin-right:5px;" ></Icon>{{$t('public.cancel')}}</Button>
					<Button shape="circle" type="ghost" style="display:inline-block;background:#3b77e3;color:#fff" @click="ggsure"><Icon type="checkmark-round" style=";margin-right:5px;color:#fff"></Icon>{{$t('public.sure')}}</Button>
				</div>
			</div>
		</div>
	</Modal>添加属性弹出框-->
	<Modal v-model="atisshow" width="660px">
		<p slot="header" style="height:30px;line-height:30px">

			<span>新建属性规格</span>
		</p>
		<div style=';display:flex;height:40px;line-height:35px'>
			<span style='width:40px'>名称：</span><Input v-model='attrName1'></Input>
		</div>
		<div style=';margin-top:10px;display:flex;height:40px;line-height:35px'>
			<span style='width:40px'>编码：</span><Input v-model='code'></Input>
		</div>
		<div style=';margin-top:10px;display:flex;height:40px;line-height:35px'>
			<span style='width:40px'>排序：</span><Input v-model='sequence' number></Input>
		</div>
		<div slot="footer">

			<div class='title'>
				<div style='color:#D15151;font-size:14px'>
					</div>
				<div style='margin-top:10px'>
					<Button shape="circle" type="ghost" style="display:inline-block;background:#ACACAC;border:none;color:#fff" @click='ggcancel'><Icon type="close" style="margin-right:5px;" ></Icon>取消</Button>
					<Button shape="circle" type="ghost" style="display:inline-block;background:#00A7F5;color:#fff" @click="ggsure"><Icon type="checkmark-round" style=";margin-right:5px;color:#fff"></Icon>添加</Button>
				</div>
			</div>
		</div>
	</Modal>
	<!--客户-->
	<Modal v-model="khisshow" width="460px">
		<p slot="header" style="height:30px;line-height:30px">

			<span>新增客户</span>
		</p>
		 <Form ref="formValidate" :model="formValidate" :rules="ruleValidate" :label-width="80">

            <FormItem label="客户名称" prop="name">
                <Input v-model="formValidate.name" placeholder="客户名称"></Input>
            </FormItem>
            <FormItem label="联系人" prop="contract">
                <Input v-model="formValidate.contract" placeholder="联系人"></Input>
            </FormItem>
            <FormItem label="手机" prop="contractPhone">
                <Input v-model="formValidate.contractPhone" placeholder="手机"></Input>
            </FormItem>

            <FormItem label="电话" >
                <Input v-model="formValidate.contractTel" placeholder="电话"></Input>
            </FormItem>
        </Form>
		<div slot="footer">

			<div class='title'>
				<div style='color:#D15151;font-size:14px'>
					</div>
				<div style='margin-top:10px'>
					<Button shape="circle" type="ghost" style="display:inline-block;background:#ACACAC;border:none;color:#fff" @click='cancelsave'><Icon type="close" style="margin-right:5px;" ></Icon>取消</Button>

					<Button shape="circle" type="ghost" style="display:inline-block;background:#00A7F5;color:#fff" @click="savekh('formValidate')"><Icon type="checkmark-round" style=";margin-right:5px;color:#fff"></Icon>完成</Button>

				</div>
			</div>
		</div>
	</Modal>
	<!--客户导入-->
    <Modal v-model="importisshow" width="700" :mask-closable='false' :closable='false' title='文件导入'>
        <el-steps  :active="activekh"  :align-center='true' style='margin-left:120px'>
              <el-step title="导入文件"></el-step>
              <el-step title="文件预览"></el-step>
              <el-step title="导入完成"></el-step>
        </el-steps>

       <!--第一步-->
        <div style='width:100%;margin:20px auto;text-align:center;' v-if='oneStep'>
           <div style='width:100%;margin:20px auto;text-align:center;font-size:14px;font-weight:600;border-top:1px solid #e4e4e4'>
                <span style='display:block;margin: 20px auto 30px 0;'>文件导入</span>
           </div>
            <div style='width:100%;margin:20px auto;text-align:center;position:relative'>
                <div style='margin-left:-90px'>
                <span>选择文件：</span>
                 <Input  disabled style='width:202px' v-model='url'></Input>
                  <div style='position:absolute;top: 0px;right: 150px;height: 35px;width: 105px;overflow: hidden;'>
                     <el-upload
                     ref="upload"
                     :show-file-list='false'
                      class="upload-demo"
                      :action="actionUrl"
                      :on-progress='onprogress'
                      :on-success='success'
                      :before-upload='beforeAvatarUpload'
                      accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" >
                      <el-button size="small" type="primary" style='background:#169BD5'>点击上传</el-button>
                     </el-upload>
                 </div>
                 <div v-if='loadingisshow' >
                        <Spin fix>
                            <mu-icon value="rotate_right" color="blue"  class="demo-spin-icon-load"></mu-icon>
                            <div>Loading...</div>
                        </Spin>
                    </div>
                <div v-if='errorisshow' class='importErrTxt'>{{error}}</div>
                </div>
            </div>
            <div style='margin-top:40px;display: flex;justify-content:space-between;;margin-bottom:-40px;font-size:14px'>
              <Button  type="ghost" style='margin-left:5px;border:none;background:#169BD5;color:#fff'>
                     <a :href="customerup" style='color:#fff' @click.stop='stopsku($event)'>下载模板文件</a>
                </Button>
                <span style="cursor:pointer" @click="cancelku">取消</span>
            </div>
        </div>
        <!--第二步-->
         <div style='width:100%;margin:20px auto;text-align:center;' v-if='twoStep'>
            <div style='width:100%;margin:20px auto;text-align:center;position:relative'>
                <Table border  stripe ellipsis ref="selection"  :columns="importstore" :data="importstoredataList"></Table>
            </div>
            <div style='margin-top:40px;margin-left:480px;margin-bottom:-40px;font-size:14px'>
                
                <span style="color:#448AFF;font-size:14px" @click="gothree"><a>确认</a></span>

            </div>
         </div>
         <!--第三步-->
         <div style='width:100%;margin:20px auto;text-align:center;' v-if='threeStep'>
            <div style='width:100%;margin:20px auto;text-align:center;'>
               <Icon type="ios-checkmark-outline" size='100' style='color:#40CA98'></Icon>
               <div><span>导入完成</span></div>
            </div>
            <div style='margin-top:40px;margin-left:580px;margin-bottom:-40px'>

                <span style="color:#448AFF" @click="sureimport"><a>继续编辑</a></span>

            </div>
         </div>
        <div slot="footer">

        </div>
    </Modal>
    <!--商品导入-->
    <Modal v-model="Skuimportisshow" width="700" :mask-closable='false' :closable='false' :title="$t('manage.warehouse.fileImport')"><!--文件导入-->
        <el-steps  :active="Skuactive"  :align-center='true' style='margin-left:120px'>
              <el-step :title="$t('manage.warehouse.fileImport')" ></el-step>
              <el-step :title="$t('manage.warehouse.fileY')" ></el-step>
              <el-step :title="$t('manage.warehouse.fileS')" ></el-step>
            </el-steps>

       <!--第一步-->
        <div style='width:100%;margin:20px auto;text-align:center;' v-if='SkuoneStep'>
           <div style='width:100%;margin:20px auto;text-align:center;font-size:14px;font-weight:600;border-top:1px solid #e4e4e4'>
				<span style='display:block;margin: 20px auto 30px 0;'>{{$t('manage.warehouse.fileImport')}}</span><!--文件导入-->
			</div>
            <div style='width:100%;margin:20px auto;text-align:center;position:relative'>
                <div style='margin-left:-108px'>
                	<span>{{$t('manage.warehouse.filechoose')}}：</span><!--选择文件-->
                  	<Input  disabled style='width:202px' v-model='Skuurl'></Input>
					<div style='position:absolute;top: 0px;right:175px;height: 35px;width: 80px;overflow: hidden;'>
						<el-upload
						ref="upload"
						:show-file-list='false'
						class="upload-demo"
						:action="SkuactionUrl"
                        :on-progress='Skuonprogress'
						:on-success='Skusuccess'
						:before-upload='SkubeforeAvatarUpload'
						accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" >
						<el-button size="small" type="primary" style='background:#169BD5'>
						{{$t('manage.warehouse.upload')}}</el-button><!--点击上传-->

						</el-upload>
					</div>
                    <div v-if='Skuloadingisshow' >
                        <Spin fix>
                            <mu-icon value="rotate_right" color="blue"  class="demo-spin-icon-load"></mu-icon>
                            
                            <div>Loading...</div>
                        </Spin>
                    </div>
                    <div v-if='Skuerrorisshow' class='importErrTxt'>{{Skuerror}}</div>
                </div>
            </div>
            <div style='margin-top:40px;display: flex;justify-content:space-between;;margin-bottom:-40px;font-size:14px;cursor:pointer'>
                <Button  type="ghost" style='margin-left:5px;border:none;background:#169BD5;color:#fff'>

                     <a :href="SkuskuLoad" style='color:#fff' @click.stop='stopsku($event)'>
                     {{$t('manage.warehouse.fileD')}}</a>
                </Button>
                <span style="" @click="Skucancel">{{$t('public.cancel')}}</span><!--取消-->
            </div>
        </div>
        <!--第二步-->
         <div style='width:100%;margin:20px auto;text-align:center;' v-if='SkutwoStep'>
            <div style='width:100%;margin:20px auto;text-align:center;position:relative'>
                <Table border height='300' ref="selection"  :columns="Skuimportstore" :data="SkuimportstoredataList"></Table>
            </div>
            <div style='margin-top:40px;display: flex;justify-content:space-between;;margin-bottom:-40px;font-size:14px'>
                <div>共导入：<span style='color:blue'>{{SkuimportstoredataList.length}}</span> 条数据</div>
                <div>
                    <span style="color:#448AFF;font-size:14px" @click="Skugothree"><a>{{$t('public.sureBtn')}}</a></span><!--确认-->
                </div>
            </div>
         </div>
         
        <div slot="footer">

        </div>
    </Modal>
    <!--商品弹框-->

	<Modal v-model="goodsisshow" width="800px">
		<p slot="header" style="height:30px;line-height:30px">

			<span>新增商品</span>
		</p>
		<div style='display:flex;justify-content: center;'>
		<div class='right-left' style='height:100px'>
			<el-upload
			  class="avatar-uploader"
			 :action="logoUrl"
			name='file'
			  :show-file-list="false"
			  :on-success="addsucesssku"
			  >
			  <img v-if="skuphoto" :src="skuphoto" class="avatar" width='80' height='80'>
			  <i v-else class="el-icon-plus avatar-uploader-icon"></i>
			</el-upload>
		</div>
		<div style='width:100%'>
		 <Form ref="formValidateG" :model="formValidateG" :rules="ruleValidateG" :label-width="80">
		 	<div style='display:flex;justify-content: center;'>
	           	<div style='width:50%'>
		            <FormItem label="商品名称" prop="skuName">
		                <Input v-model="formValidateG.skuName" placeholder="商品名称"></Input>
		            </FormItem>
		            <FormItem label="货号" prop="skuCode">
		                <Input v-model="formValidateG.skuCode" placeholder="货号"></Input>
		            </FormItem>
		            <FormItem label="条码" prop="barcode">
		                <Input v-model="formValidateG.barcode" placeholder="条码"></Input>
		            </FormItem>
	            </div>
	            <div style='width:50%'>
		            <FormItem label="成本价" prop="costPrice">
		                <Input v-model="formValidateG.costPrice" placeholder="成本价"></Input>
		            </FormItem>
		            <FormItem label="批发价" prop="wholePrice">
		                <Input v-model="formValidateG.wholePrice" placeholder="批发价"></Input>
		            </FormItem>
		            <FormItem label="吊牌价" prop="price">
		                <Input v-model="formValidateG.price" placeholder="吊牌价"></Input>
		            </FormItem>
	            </div>
           </div>
        </Form>
        </div>
        </div>
		<div slot="footer">

			<div class='title'>
				<div style='color:#D15151;font-size:14px'>
					</div>
				<div style='margin-top:10px'>
					<Button shape="circle" type="ghost" style="display:inline-block;background:#ACACAC;border:none;color:#fff" @click='cancelsaveG'><Icon type="close" style="margin-right:5px;" ></Icon>取消</Button>

					<Button shape="circle" type="ghost" style="display:inline-block;background:#00A7F5;color:#fff" @click="savesku('formValidateG')"><Icon type="checkmark-round" style=";margin-right:5px;color:#fff"></Icon>完成</Button>

				</div>
			</div>
		</div>
	</Modal>
	</div>
</template>
<script type="text/javascript">
import LoadUrl from '@/components/common/actionLoad'
export default{
	data(){
		return{
				errorisshow:false,
                error:'',//导入失败的提示
                searchKeyword:'',//查询客户关键字
				uid:this.$store.state.common.token,
                actionUrl:LoadUrl.httpPrefix.Url+'client/import?uid='+this.$store.state.common.token,//导入地址
                status:'',//上传状态
                type:1,//选择文件类型
                oneStep:true,//第一步显示
                twoStep:false,//第2步显示
                threeStep:false,//第3步显示
                activekh:1,//步数
                importisshow:false,//导入显示
                url:'',//选择文件后或名称
                loadingisshow:false,
                customerup:"",
                //导入的仓库文件数据key
                importstore:[

                    {
                        title:"编号",
                        key:'code',
                        width: 80,

                    },
                     {
                        title:"名称",
                        key:'name',
                        ellipsis:true,
                        width: 120,
                        align: 'center',
                    },
                     {
                        title:"等级",
                        key:'level',
                        ellipsis:true,
                        align: 'center',
                         width: 80,
                    },
                     {
                        title:"联系人",
                        key:'contract',
                        ellipsis:true,
                        align: 'center',
                         width: 120,
                    },
                     {
                        title:"联系人职务",
                        key:'contractPosition',
                        ellipsis:true,
                        align: 'center',
                         width: 120,
                    },
                     {
                        title:"联系人手机",
                        key:'contractPhone',
                        ellipsis:true,
                        align: 'center',
                        width: 120,
                    },
                     {
                        title:"联系人电话",
                        key:'contractTel',
                        ellipsis:true,
                        align: 'center',
                        width: 120,
                    },

                     {
                        title:"联系人邮箱",
                        key:'contractEmail',
                        ellipsis:true,
                        align: 'center',
                        width: 120,
                    },
                    {
                        title:"地址",
                        key:'address',
                        ellipsis:true,
                        align: 'center',
                        width: 120,

                    },
                ],
                importstoredataList:[],//导入的仓库文件数据
            //商品导入数据
            formValidateG:{
            	skuName:"",
            	barcode:"",
            	skuCode:'',
            	price:'0',
            	costPrice:'0',
            	wholePrice:'0',
            },
            skuphoto:'',
            goodsisshow:false,
            ruleValidateG:{
            	skuName:[{ required: true, message: '商品名称不能为空', trigger: 'blur' }],
					inventoryUp:[
					{ pattern: /^[1-9]\d*$|^0$/, message: '库存应为数字', trigger: 'blur'  }
					],
					inventory:[
					{ pattern: /^[1-9]\d*$|^0$/, message: '库存应为数字', trigger: 'blur'  }
					],

					costPrice:[
						{required: true, message: '成本价不能为空', trigger: 'blur' },
						{ pattern: /^\d{1,14}(\.\d{1,2})?$/, message: '成本价应为数字或小数且小数点后两位', trigger: 'blur'  }
					],
					wholePrice:[
						{ required: true, message: '批发价不能为空', trigger: 'blur' },
						{ pattern: /^\d{1,14}(\.\d{1,2})?$/, message: '批发价应为数字或小数且小数点后两位', trigger: 'blur'  }
					],
					price:[
						{ required: true, message: '吊牌价不能为空', trigger: 'blur' },
						{ pattern: /^\d{1,14}(\.\d{1,2})?$/, message: '吊牌价应为数字或小数且小数点后两位', trigger: 'blur'  }
					],
            },
           		Skuloading:true,
                SkuskuLoad:"",//商品导入模板
                Skuloadingisshow:false,
                Skuisshowtable:true,
				Skuerrorisshow:false,
                Skuerror:'',//导入失败的提示
				Skutype:1,
                SkuoneStep:true,//第一步显示
                SkutwoStep:false,//第2步显示
                SkuthreeStep:false,//第3步显示
                Skuactive:1,//步数
                Skuimportisshow:false,//导入显示
                Skuurl:'',//选择文件后或名称
                totalSku:0,
                pageSizeSku:0,
				//POST /sku/import 导入
				SkuactionUrl:LoadUrl.httpPrefix.Url+'initinventory/sku?uid='+this.$store.state.common.token,//导入地址
                //导入的商品文件数据key
                Skuimportstore:[
                    {
                        title: '商品条码',
                        key:'skuCode',

                        width:140
                    },
                    {
                        title: '商品名称',
                         width:180,
                        key:'skuName',
                    },

                    {
                        title: '最高库存',
                        key:'inventoryUp',

                        width:100,
                       align:'center'
                    },

                    {
                        title: '最低库存',
                        key:'inventory',

                        width:100,
                        align:'center'
                    },
                    {
                        title: '零售价',
                        key:'price',

                        width:80,
                       align:'center'
                    },
                    {
                        title: '批发价',
                        key:'wholePrice',

                       width:80,
                        align:'center'
                    },
                     {
                        title: '成本价',
                        key:'costPrice',

                        width:80,
                       align:'center'
                    },
                    {
                        title: '分类',
                        key:'className',

                        width:80,
                        align:'center'
                    },
                ],
				SkuimportstoredataList:[],//导入的仓库文件数据
            
			khisshow:false,//客户显示弹框
			formValidate:{
				name:'',//客户名
				contractTel:'',//电话
				contract:'',//联系人
				contractPhone:'',//手机
			},
			//验证
                ruleValidate:{
                name:[
                         { required: true, message: '客户名不能为空', trigger: 'blur' }
                    ],
                 contractPhone:[
                         { required: true, message:this.$t('orders.phoneNoEmpty'), trigger: 'blur' },
                         { pattern: /^1[3|4|5|7|8][0-9]{9}$/, message: '请输入正确的手机号码' }
                    ],
                contractTel:[
                	
                     { pattern: /(^[0-9]{3,4}\-[0-9]{3,8}$)|(^[0-9]{3,8}$)|(^\([0-9]{3,4}\)[0-9]{3,8}$)|(^0{0,1}13[0-9]{9}$)/, message: '请输入正确的电话号码' }
                ]
            },
            source: null,
			colorIsshow:true,//初始化显示
			active:0,//步骤第一条
			logoUrl:LoadUrl.httpPrefix.Url+'file/action/upload/image/url?uid='+this.$store.state.common.token,
			c:true,
			d:true,
			s:true,
			sx:true,//支付方式的切换{{$t('public.addnew')}}，修改
			atisshow:false,
			attrsname:'',
			editattrisshow:false,
			numIndex1:0,
			uid: this.$store.state.common.token,
			//分类
			// AllflTitle:["分类名称","分类图片","操作"],
			AllflTitle:[this.$t('manage.setting.classname'),this.$t('manage.setting.img'),this.$t('public.action')],
            Allfl:[],//分类数组
            level1Editisshow:true,//一级分类新增还是修改
            level1classId:"",//一级分类id
            level2Editisshow:true,//二级分类新增还是修改
            level2classId:"",//二级分类id
            level2photo:"",//二级分类图片
            level2Ml:false,//二级分类弹框
            level3Editisshow:true,//三级分类新增还是修改
            level3classId:"",//三级分类id
            level3photo:"",//三级分类图片
            level3Ml:false,//三级分类弹框
            skuclassisshow:false,//分类弹框
            totalfl:0,
            pageSizefl:0,
            skuclassphoto:"",//一级分类图片
            formValidateskuclass:{
                skuclassName:"",//分类名称
            },
            ruleValidateskuclass:{
                skuclassName:[{ required: true, message: '分类名称不能为空', trigger: 'blur' }]
            },
            
            uid: this.$store.state.common.token,
            //添加二级分类
            level2class:{
                level2Name:"",
            },
            level2ruleclass:{
                level2Name:[{ required: true, message: '分类名称不能为空', trigger: 'blur' }]
            },
            //添加三级分类
            level3class:{
                level3Name:"",
            },
            level3ruleclass:{
                level3Name:[{ required: true, message: '分类名称不能为空', trigger: 'blur' }]
            },
			attrschildren:false,
			attrsisshow:false,
			//添加规格属性
			skuclassdata:[],
			skuclasskey:[
				{
					title: '操作',
					key: 'action',
					width: 100,
					align: 'center',
					render: (h, params) => {
						return h('div', [
							h('div', {
								style: {
									float: 'left',
									marginRight: '5px'
								},
								on: {
									click: (e) => {
											//点击加号


										}
									}
								}, [
								h('img', {
									domProps: {
										src: 'http://img.zsydian.com/icon/add.png',
										style: "width:20px;height:20px;cursor:pointer"
									},
									on:{
										'click':()=>{

											if(this.s==false){
												return
											}else{
												this.skuclasschildisshow=true
											}


										}
									}
								})
								]),
							h('div', {
								style: {
									float: 'left',
									marginRight: '5px'

								},
								on: {
									click: () => {

										}
									}
								}, [
								h('img', {
									domProps: {
										src: 'http://img.zsydian.com/icon/tabledel.png',
										style: "width:20px;height:20px;cursor:pointer"
									},
									on:{
										click:(e)=>{
											e.stopPropagation()
												//删除行

												if(params.index==0){
													return
												}else if(this.s==false){
													return
												}else{
													this.skuclassdata.splice(params.index,1)
												}


											}
										}

									})
								])
							]);
					}
				},
				{
					title:"名称",
					key:"name",
					render:(h,parmas)=>{
						return h('Input',{
							props:{
								value:parmas.row.name
							},
							on:{
								'on-change':(e)=>{

									parmas.row.name=e.target.value




								},
								"on-blur":()=>{
									this.childs[parmas.index].name=parmas.row.name
								}
							}
						},parmas.row.name)
					}

				},
				{
					title:"编码",
					key:"code",
					render:(h,parmas)=>{
						return h('Input',{
							props:{
								value:parmas.row.code
							},
							on:{
								'on-change':(e)=>{
									parmas.row.code=e.target.value


								},
								"on-blur":()=>{
									this.childs[parmas.index].code=parmas.row.code
								}
							}
						},parmas.row.code)
					}

				},
				{
					title:"排序",
					key:"sequence",
					render:(h,parmas)=>{
						return h('Input',{
							props:{
								value:parmas.row.sequence,
								number:true
							},
							on:{
								'on-change':(e)=>{
									parmas.row.sequence=e.target.value


								},
								"on-blur":()=>{
									this.childs[parmas.index].sequence=parmas.row.sequence
								}
							}
						},parmas.row.sequence)
					}
				},
			],
			//商品规格
			columns:[
				{
					title:this.$t('manage.setting.ckname'),//名称
					key:"name",
					width:'140',
					align:'center'
				},
				{
					title:this.$t('manage.setting.flchild'),//规格
					key:"attrname",

				},
				{
					title:this.$t('manage.sku.action'),//操作
					key:"action",
					width:'140',
					align:'center',
					render:(h,parmas)=>{
						return h('div',[
								h('a',{
									on:{
										'click':()=>{
											this.attrsisshow=true
											this.sx=false
											this.formValidateattr.attrName=parmas.row.name
											this.attrsid=parmas.row.id
											this.detailVos=parmas.row.detailVos
											this.attrdata=parmas.row.detailVos
											if(parmas.row.detailVos==null || parmas.row.detailVos.length==''){
												this.attrdata=[{name:""}]
											}else{
												this.attrdata=parmas.row.detailVos
											}
										}
									}
								},this.$t('public.EditBtn')),
								h('a',{
									style:{
										marginLeft:'20px'
									},
									on:{
										'click':()=>{
											//console.log(parmas.row.id)
											this.axios.delete('skuspec/delete/'+parmas.row.id+'?uid='+this.uid).then(res=>{
												if(res.data.status==200){
													this.$notify({
								                        title:"",//
								                        message:this.$t('public.deleteSuccess'),//
								                        type: 'success',
								                        position: 'bottom-right'
								                    });
													this.getattrs()
												}
											})
										}
									}
								},this.$t('public.del'))
							])
					}

				}
			],
			formValidateattr:{
				attrName:''
			},
			ruleValidateattr:{
				attrName:[{ required: true, message: '属性名称不能为空', trigger: 'blur' }]
			},
			arr:{},
			dataList:[],//属性data
			attrname:'',
			attrsid:'',
			totalattr:0,
			pageSizeattr:0,
			attrName:'',//属性一级名
			attrName1:'',//属性明细名
			sequence:'',//属性明细排序
			code:'',//属性明细编码
			detailVos:[],//属性明细编码
			//添加规格属性
			attrdata:[{name:""}],
			attrkey:[

				{
					title: this.$t('public.action'),//'操作',
					key: 'action',
					width: 100,
					align: 'center',
					render: (h, params) => {
						return h('div', [
							h('div', {
								style: {
									float: 'left',
									marginRight: '5px'
								},

								}, [
								h('img', {
									domProps: {
										src: 'http://img.zsydian.com/icon/add.png',
										style: "width:20px;height:20px;cursor:pointer"
									},
									on:{
										'click':()=>{
											// if(this.s==false){
											// 	return
											// }else{
											// 	this.atisshow=true
											// }
											// this.atisshow=true
											this.attrdata.push({
												name:""
											})

										}
									}
								})
								]),
							h('div', {
								style: {
									float: 'left',
									marginRight: '5px'

								},
								on: {
									click: () => {

										}
									}
								}, [
								h('img', {
									domProps: {
										src: 'http://img.zsydian.com/icon/tabledel.png',
										style: "width:20px;height:20px;cursor:pointer"
									},
									on:{
										click:(e)=>{
											e.stopPropagation()
												//删除行

												if(params.index==0){
													return
												}else if(this.s==false){
													return
												}else{
													this.attrdata.splice(params.index,1)
												}


											}
										}

									})
								])
							]);
					}
				},
				{
					title:this.$t('manage.setting.ckname'),//名称
					key:"name",
					render:(h,parmas)=>{
						return h('Input',{
							props:{
								value:parmas.row.name
							},
							on:{
								'on-change':(e)=>{
									parmas.row.name=e.target.value
								},
								"on-blur":()=>{
									// this.detailVos[parmas.index].name=parmas.row.name
									this.attrdata[parmas.index].name=parmas.row.name
								}
							}
						},parmas.row.name)
					}

				},
				{
					title:this.$t('manage.setting.sq'),//编码
					key:"code",
					render:(h,parmas)=>{
						return h('Input',{
							props:{
								value:parmas.row.code
							},
							on:{
								'on-change':(e)=>{
									parmas.row.code=e.target.value


								},
								"on-blur":()=>{
									// this.detailVos[parmas.index].code=parmas.row.code
									this.attrdata[parmas.index].code=parmas.row.code
								}
							}
						},parmas.row.code)
					}

				},
				// {
				// 	title:this.$t('manage.sku.attrsq'),//排序
				// 	key:"sequence",
				// 	render:(h,parmas)=>{
				// 		return h('Input',{
				// 			props:{
				// 				value:parmas.row.sequence,
				// 				number:true
				// 			},
				// 			on:{
				// 				'on-change':(e)=>{
				// 					parmas.row.sequence=e.target.value


				// 				},
				// 				"on-blur":()=>{
				// 					this.detailVos[parmas.index].sequence=parmas.row.sequence
				// 				}
				// 			}
				// 		},parmas.row.sequence)
				// 	}
				// },
			],
			//商品
			goodskey: [
                 {
                    title: '商品条码',
                    key:'skuCode',
               		

                },
                {
                    title: '商品名称',
             
                    key:'skuName'

                },
                
                {
                    title: '批发价',
                    key:'wholePrice',
                },
                {
                    title: '零售价',
                    key:'price',
                },
                {
                    title: '状态',
                    key:'statusDesc',
                  	ellipsis:true,
                  	render:(h,params)=>{
                        return h('span',{
                            style:{
                                    color:params.row.status==1?'#40ca98':params.row.status==0?'#d53c39':params.row.status==99?'#d53c39':''
                                }
                        },params.row.statusDesc)
                    }

                }

            ],
			goods:[],
			//客户
			khkey: [
					
					{
						title:"编码",
						key:"code",
					
					},
					{
						title: '客户名称',
					
						key: 'name'
					},
					{
						title: '联系人',
					
						key: 'contract'
					},

					{
						title: '手机',
					
						key: 'contractPhone'
					},
					
					{
						title: '额度',
					
						key: 'credits'
					},
					{
						title: '备注',
					
						key: 'remark'
					},
				],
			khdataList:[],
			getSystem:[],
		}
	},
	methods:{
		//导入
        //下载阻止冒泡
		stopsku(event){
           event.stopPropagation()
        },
		//跳过进入主页几大模块
		skip(){
			// this.$router.push('/main')
			this.axios.get('getSystem?uid='+this.uid).then((res)=>{
                if(res.data.status==200){
                    this.getSystem=res.data.rows
                    if(this.getSystem.length==1){
                        this.$router.replace({
                            name: this.getSystem[0].path
                        });
                    }else{
                        //多个有权限是的模块跳转main
                        this.$router.replace({
                            name: 'main'
                        });
                    }
                }
            })
		},
		//点击第1商品分类的下一步
		clickOne(){
			this.active=1
		},
		//点击第2商品规格的下一步
		clickTwo(){
			this.active=2
		},
		//点击第二的上一步
		clickTwoPre(){
			this.active=0
		},
		//点击第3商品的下一步
		clickThree(){
			this.active=3
		},
		//点击第3商品的上一步
		clickThreePre(){
			this.active=1
		},
		//点击第4客户的下一步
		clickFour(){
			this.active=4
			if(this.active==4){

				setTimeout(() => {
	                this.$Spin.hide();

	                this.colorIsshow=false
	            }, 3000);
			}
		},
		//点击第4客户的上一步
		clickFourPre(){
			this.active=2
		},
		
		 //商品分类i
        //增加一级分类
        addClass(){
            this.skuclassisshow=true
            this.level1Editisshow=true
            this.skuclassphoto=''
            this.formValidateskuclass.skuclassName=''
        },
        //商品一级分类上传图片成功
        addClassImgSuccess(res,file){
            this.skuclassphoto=res.rows.url
        },
        addsucessSunclass(res,file){
            this.skuclassphotoSunclass=res.rows.url
        },
        //保存一级分类
        saveClassLevel1(name){
             this.$refs[name].validate((valid) => {
                if(valid){
                    this.axios.post('skuclass/add?uid='+this.uid,{
                        name:this.formValidateskuclass.skuclassName,
                        photo:this.skuclassphoto,
                        childs:[]
                    }).then(res=>{
                        if(res.data.status==200){
                            this.$notify({
                            title:"",//
                            message:this.$t('public.SaveSuccess'),//
                            type: 'success',
                            position: 'bottom-right'
                        });
                            this.skuclassisshow=false
                            this.formValidateskuclass.skuclassName=''
                            this.skuclassphoto=''
                            this.getAllfl()
                        }else{
                            this.$notify({
                                title:"",//
                                message:res.data.errorMessage,
                                type: 'error',
                                position: 'bottom-right'
                            });
                        }
                    })
                }
             })
        },
        //取消
        cancelClassLevel1(){
            this.skuclassisshow=false
            this.formValidateskuclass.skuclassName=''
            this.skuclassphoto=''
            
        },
        //一级分类获取焦点
        level1focus(item,index){
            $('.editInput').eq(index).text(item.title)
            console.log($('.editInput').eq(index).text())
        },
        //一级分类失去焦点{{$t('public.EditBtn')}}一级分类PUT /skuclass/update {{$t('public.EditBtn')}}
        level1Blur(item,index){
            if($('.editInput').eq(index).text()==''){
                this.$notify({
                    title:"",//
                    message:this.$t('public.classNameEmpty'),//'分类名称不能为空',
                    type: 'error',
                    position: 'bottom-right'
                });
            }else if($('.editInput').eq(index).text()==item.title){
                return
            }else{
                this.axios.put('/skuclass/update?uid='+this.uid,{
                    id:item.id,
                    name:$('.editInput').eq(index).text()
                }).then(res=>{
                    if(res.data.status==200){
                        this.$notify({
                            title:"",//
                            message:this.$t('public.editSuccess'),//
                            type: 'success',
                            position: 'bottom-right'
                        });
                        this.getAllfl()
                    }else{
                        this.$notify({
                            title:"",//
                            message:res.data.errorMessage,
                            type: 'error',
                            position: 'bottom-right'
                        });
                    }
                })
            }
            
        },
        //点击{{$t('public.EditBtn')}}一级分类
        EditLevel1(item){
            this.skuclassisshow=true
            this.level1Editisshow=false
            this.level1classId=item.id
            this.skuclassphoto=item.icon
            this.formValidateskuclass.skuclassName=item.title
        },
        //{{$t('public.EditBtn')}}一级分类
        EditClassLevel1(){
            this.axios.put('/skuclass/update?uid='+this.uid,{
                id:this.level1classId,
                name:this.formValidateskuclass.skuclassName,
                photo:this.skuclassphoto
            }).then(res=>{
                if(res.data.status==200){
                    this.$notify({
                        title:"",//
                        message:this.$t('public.editSuccess'),//
                        type: 'success',
                        position: 'bottom-right'
                    });
                    this.skuclassisshow=false
                    this.skuclassphoto=''
                    this.level1classId=''
                    this.formValidateskuclass.skuclassName=''
                    this.getAllfl()
                }else{
                    this.$notify({
                        title:"",//
                        message:res.data.errorMessage,
                        type: 'error',
                        position: 'bottom-right'
                    });
                }
            })
        },
        //{{$t('public.del')}}一级分类
        delLevel1(item){
            this.axios.delete('skuclass/delete/'+item.id+'?uid='+this.uid).then(res=>{
               if(res.data.status==200){
                    this.$notify({
                        title:"",//
                        message:this.$t('public.deleteSuccess'),//
                        type: 'success',
                        position: 'bottom-right'
                    });
                    this.getAllfl()
                }else{
                    this.$notify({
                        title:"",//
                        message:res.data.errorMessage,
                        type: 'error',
                        position: 'bottom-right'
                    });
                }
            })
        },

        //二级分类获取焦点
        level2focus(i,item,index){

            $('.level2Name').eq(index).text(i.title)
            console.log($('.level2Name').eq(index).text())
            console.log(i)
        },
        //二级分类失去焦点{{$t('public.EditBtn')}}一级分类PUT /skuclass/update {{$t('public.EditBtn')}}
        level2Blur(i,item,index){
            if($('.level2Name').eq(index).text()==''){
                this.$notify({
                    title:"",//
                    message:this.$t('public.classNameEmpty'),//'分类名称不能为空',
                    type: 'error',
                    position: 'bottom-right'
                });
            }else if($('.level2Name').eq(index).text()==i.title){
                return
            }else{
                this.axios.put('/skuclass/update?uid='+this.uid,{
                    id:i.id,
                    parentId:item.id,
                    name:$('.level2Name').eq(index).text()
                }).then(res=>{
                    if(res.data.status==200){
                        this.$notify({
                            title:"",//
                            message:this.$t('public.editSuccess'),//
                            type: 'success',
                            position: 'bottom-right'
                        });
                        this.getAllfl()
                    }else{
                        this.$notify({
                            title:"",//
                            message:res.data.errorMessage,
                            type: 'error',
                            position: 'bottom-right'
                        });
                    }
                })
            }
            
        },
        //点击{{$t('public.EditBtn')}}二级分类
        EditLevel2(item){
            this.level2Ml=true
            this.level2Editisshow=false
            this.level1classId=item.parentId//上级id
            this.level2classId=item.id//当前id
            this.level2photo=item.icon
            this.level2class.level2Name=item.title
        },
        //{{$t('public.EditBtn')}}二级分类
        EditClassLevel2(){
            this.axios.put('/skuclass/update?uid='+this.uid,{
                id:this.level2classId,
                parentId:this.level1classId,
                name:this.level2class.level2Name,
                photo:this.level2photo
            }).then(res=>{
                if(res.data.status==200){
                    this.$notify({
                        title:"",//
                        message:this.$t('public.editSuccess'),//
                        type: 'success',
                        position: 'bottom-right'
                    });
                    this.level2Ml=false
                    this.level2classId=''
                    this.level1classId=''
                    this.level2class.level2Name=''
                    this.level2photo=''
                    this.getAllfl()
                }else{
                    this.$notify({
                        title:"",//
                        message:res.data.errorMessage,
                        type: 'error',
                        position: 'bottom-right'
                    });
                }
            })
        },
        //{{$t('public.del')}}二级分类
        delLevel2(item){
            this.axios.delete('skuclass/delete/'+item.id+'?uid='+this.uid).then(res=>{
               if(res.data.status==200){
                    this.$notify({
                        title:"",//
                        message:this.$t('public.deleteSuccess'),//
                        type: 'success',
                        position: 'bottom-right'
                    });
                    this.getAllfl()
                }else{
                    this.$notify({
                        title:"",//
                        message:res.data.errorMessage,
                        type: 'error',
                        position: 'bottom-right'
                    });
                }
            })
        },
        //三级分类获取焦点
        level3focus(j,i,item,index){

            $('.level3Name').eq(index).text(i.title)
            
        },
        //三级分类失去焦点{{$t('public.EditBtn')}}一级分类PUT /skuclass/update {{$t('public.EditBtn')}}
        level3Blur(j,i,item,index){
            if($('.level3Name').eq(index).text()==''){
                this.$notify({
                    title:"",//
                    message:this.$t('public.classNameEmpty'),//'分类名称不能为空',
                    type: 'error',
                    position: 'bottom-right'
                });
            }else if($('.level3Name').eq(index).text()==j.title){
                return
            }else{
                this.axios.put('/skuclass/update?uid='+this.uid,{
                    id:j.id,
                    parentId:i.id,
                    name:$('.level3Name').eq(index).text()
                }).then(res=>{
                    if(res.data.status==200){
                        this.$notify({
                            title:"",//
                            message:this.$t('public.editSuccess'),//
                            type: 'success',
                            position: 'bottom-right'
                        });
                        this.getAllfl()
                    }else{
                        this.$notify({
                            title:"",//
                            message:res.data.errorMessage,
                            type: 'error',
                            position: 'bottom-right'
                        });
                    }
                })
            }
            
        },
        //点击{{$t('public.EditBtn')}}二级分类
        EditLevel3(item){
            this.level3Ml=true
            this.level3Editisshow=false
            this.level2classId=item.parentId//上级id
            this.level3classId=item.id//当前id
            this.level3photo=item.icon
            this.level3class.level3Name=item.title
        },
        //{{$t('public.EditBtn')}}二级分类
        EditClassLevel3(){
            this.axios.put('/skuclass/update?uid='+this.uid,{
                id:this.level3classId,
                parentId:this.level2classId,
                name:this.level3class.level3Name,
                photo:this.level3photo
            }).then(res=>{
                if(res.data.status==200){
                    this.$notify({
                        title:"",//
                        message:this.$t('public.editSuccess'),//
                        type: 'success',
                        position: 'bottom-right'
                    });
                    this.level3Ml=false
                    this.level3classId=''
                    this.level2classId=''
                    this.level3class.level3Name=''
                    this.level3photo=''
                    this.getAllfl()
                }else{
                    this.$notify({
                        title:"",//
                        message:res.data.errorMessage,
                        type: 'error',
                        position: 'bottom-right'
                    });
                }
            })
        },
        //{{$t('public.del')}}三级分类
        delLevel3(item){
            this.axios.delete('skuclass/delete/'+item.id+'?uid='+this.uid).then(res=>{
               if(res.data.status==200){
                    this.$notify({
                        title:"",//
                        message:this.$t('public.deleteSuccess'),//
                        type: 'success',
                        position: 'bottom-right'
                    });
                    this.getAllfl()
                }else{
                    this.$notify({
                        title:"",//
                        message:res.data.errorMessage,
                        type: 'error',
                        position: 'bottom-right'
                    });
                }
            })
        },
        //添加二级分类
        addlevel2(item){
            this.level2Ml=true
            this.level2Editisshow=true
            this.level1classId=item.id//一级分类id
            this.level2photo=''
            this.level2class.level2Name=''
        },
         //添加图片二级分类
        addlevel2Success(res,file){
            this.level2photo=res.rows.url
        },
        //保存二级分类
        saveClassLevel2(name){
             this.$refs[name].validate((valid) => {
                if(valid){
                    this.axios.post('skuclass/add?uid='+this.uid,{
                        parentId:this.level1classId,
                        name:this.level2class.level2Name,
                        photo:this.level2photo
                    }).then(res=>{
                        if(res.data.status==200){
                            this.$notify({
                                title:"",//
                                message:this.$t('public.SaveSuccess'),//
                                type: 'success',
                                position: 'bottom-right'
                            });
                            this.getAllfl()
                            this.level2Ml=false
                            this.level2photo=''
                            this.level1classId=''
                            this.level2class.level2Name=''
                        }else{
                            this.$notify({
                                title:"",//
                                message:res.data.errorMessage,
                                type: 'error',
                                position: 'bottom-right'
                            });
                        }
                    })
                }
             })
        },
        //取消
        cancelClassLevel2(){
            this.level2Ml=false
            this.level2photo=''
            this.level1classId=''
            this.level2class.level2Name=''
        },
        //点击添加三级分类
        addlevel3(item){
            this.level3Ml=true
            this.level3Editisshow=true
            this.level2classId=item.id//二级分类id
            this.level3photo=''
            this.level3class.level3Name=''
        },
        //添加图片三级分类
        addlevel3Success(res,file){
            this.level3photo=res.rows.url
        },
        //保存三级分类
        saveClassLevel3(name){
            this.$refs[name].validate((valid) => {
                if(valid){
                    this.axios.post('skuclass/add?uid='+this.uid,{
                        parentId:this.level2classId,
                        name:this.level3class.level3Name,
                        photo:this.level3photo
                    }).then(res=>{
                        if(res.data.status==200){
                            this.$notify({
                                title:"",//
                                message:this.$t('public.SaveSuccess'),//
                                type: 'success',
                                position: 'bottom-right'
                            });
                            this.getAllfl()
                            this.level3Ml=false
                            this.level2classId=''
                            this.level3photo=''
                            this.level3class.level3Name=''
                        }else{
                            this.$notify({
                                title:"",//
                                message:res.data.errorMessage,
                                type: 'error',
                                position: 'bottom-right'
                            });
                        }
                    })
                }
             })
        },
        cancelClassLevel3(){
            this.level3Ml=false
            this.level2classId=''
            this.level3photo=''
            this.level3class.level3Name=''
        },
        //1展开
        clickAdd(item,index){
            item._check=true
        },
        //1收起
        clickReduce(item,index){
            item._check=false
        },
        //2展开
        clickSubAdd(item,index){
            item._check=true
        },
        //2收起
        clickSubReduce(item,index){
            item._check=false
        },
        //3展开
        clickSub3Add(item,index){
            item._check=true
        },
        //3收起
        clickSub3Reduce(item,index){
            item._check=false
        },
        //获取所有付类
        getAllfl(){
            this.axios.get('skuclass/query?uid='+this.uid).then(res=>{

                if(res.data.status==200){
                    let arr=[]
                    arr=res.data.rows
                    this.totalfl=res.data.total
                    this.pageSizefl=res.data.pageSize
                    console.log(this.total1)
                    this.Allfl=arr.map(x=>{
                        let bj={
                            title:x.name,
                            id:x.id,
                            icon:x.photo,
                            children:x.childs,
                            _check:false,

                        }
                        bj.children=bj.children.map(j=>{
                            let b={
                                title:j.name,
                                id:j.id,
                                parentId:x.id,
                                icon:j.photo,
                                children:j.childs,
                                _check:false,
                            }
                            return b
                        })
                        bj.children.forEach(n=>{
                            n.children=n.children.map(m=>{
                                let c={
                                    title:m.name,
                                    id:m.id,
                                    parentId:j.id,
                                    icon:m.photo,
                                }
                                return m
                            })
                        })
                        return bj
                    })
                    console.log(this.Allfl)
                }
            })
        },
        //付类翻页
        changePageSizefl(size){
            this.pageSizefl = size
        },
        //切换分类一条页
        getDatafl(current){
            this.axios.get('skuclass/query?offset='+current+'&uid='+this.uid).then((res)=>{
                if(res.data.status==200){
                        let arr=[]
                        arr=res.data.rows
                        this.Allfl=arr.map(x=>{
                            let bj={
                                title:x.name,
                                id:x.id,
                                icon:x.photo,
                                children:x.childs,
                                _check:false,

                            }
                            bj.children=bj.children.map(j=>{
                                let b={
                                    title:j.name,
                                    id:j.id,
                                    parentId:x.id,
                                    icon:j.photo,
                                    children:j.childs,
                                     _check:false,
                                }
                                return b
                            })
                            bj.children.forEach(n=>{
                                n.children=n.children.map(m=>{
                                    let c={
                                        title:m.name,
                                        id:m.id,
                                        parentId:j.id,
                                        icon:m.photo,
                                    }
                                    return m
                                })
                            })
                            return bj
                        })
                        
                    }
            })

        },
		
		//规格
		//{{$t('public.addnew')}}属性
		addattrs(){
			this.attrsisshow=true
			this.sx=true
			this.formValidateattr.attrName=''
			this.attrdata=[{name:""}]
			this.detailVos=[]
		},
		acancel(){
			this.attrsisshow=false
		},
		//确认保存
		addattrssure(name){
			this.$refs[name].validate((valid) => {
				if(valid){
					this.axios.post('skuspec/add?uid='+this.uid,{
						name:this.formValidateattr.attrName,
						detailVos:this.attrdata
					}).then(res=>{
						if(res.data.status==200){
							this.$notify({
		                        title:"",//
		                        message:this.$t('public.SaveSuccess'),//
		                        type: 'success',
		                        position: 'bottom-right'
		                    });
		                    this.formValidateattr.attrName=''
							this.attrsisshow=false
							this.attrdata=[{name:""}]
							this.getattrs()
						}else{
							this.$notify({
	                        title:"",//
	                        message:res.data.errorMessage,
	                        type: 'error',
	                        position: 'bottom-right'
	                    });
						}
					})
				}
			})

		},
		//修改
		editattrssure(name){
			this.$refs[name].validate((valid) => {
				if(valid){
					this.axios.put('skuspec/update/?uid='+this.uid,{
						id:this.attrsid,
						name:this.formValidateattr.attrName,
						// detailVos:this.detailVos
						detailVos:this.attrdata
					}).then(res=>{
						if(res.data.status==200){
							this.$notify({
		                        title:"",//
		                        message:this.$t('public.editSuccess'),//
		                        type: 'success',
		                        position: 'bottom-right'
		                    });
							this.formValidateattr.attrName=''
							this.attrsisshow=false
							this.attrdata=[{name:""}]
							this.getattrs()
						}else{
							this.$notify({
		                        title:"",//
		                        message:res.data.errorMessage,
		                        type: 'error',
		                        position: 'bottom-right'
		                    });
						}
					})
				}
			})
		},
		//添加规格
		ggsure(){
			if(this.attrName1==''){
				this.$notify({
                    title:"",//
                    message:this.$t('finance.nameEmpty'),
                    type: 'error',
                    position: 'bottom-right'
                });
			}else{
				let arr={
				name:this.attrName1,
				code:this.code,
				sequence:this.sequence
			}
				this.attrdata.push(arr)
				this.detailVos.push(arr)
					this.attrName1=''
					this.code=''
					this.sequence=''
				//console.log(this.detailVos)
			}


		},
		ggcancel(){
			this.atisshow=false
		},
		// editcancel(){
		// 	this.editattrisshow=false
		// },
		//获取属性
		getattrs(){
			this.axios.get('skuspec/list?uid='+this.uid).then(res=>{
				if(res.data.status==200){
					console.log(res.data.rows)
					this.dataList=res.data.rows
					this.totalattr=res.data.total
					this.pageSizeattr=res.data.pageSize
					this.dataList.forEach((item,index)=>{
						let strname=[]
						for(let i =0;i<item.detailVos.length;i++){

							strname.push(item.detailVos[i].name)
						}
						let s2 = strname.join(',')
						this.attrname = s2
						this.dataList[index]['attrname']=this.attrname
					})
				}
			})
		},
		getDataattr(current){
            this.axios.get('/skuspec/list?offset='+current+'&uid='+this.uid).then((res)=>{
                this.totalattr=res.data.total
				this.pageSizeattr=res.data.pageSize
              	this.dataList=res.data.rows
              	this.dataList.forEach((item,index)=>{
						let strname=[]
						for(let i =0;i<item.detailVos.length;i++){
							strname.push(item.detailVos[i].name)
						}
						let s2 = strname.join(',')
						this.attrname = s2
						this.dataList[index]['attrname']=this.attrname
					})
            })
        },
        //翻页
        changePageSizeattr(size){
            this.pageSizeattr = size
        },
		//客户
		addkh(){
			this.khisshow=true
		},
		getkh(){
			this.axios.get('/client/query?cl=1'+'&uid=' + this.uid).then(res=>{
				if(res.data.status==200){
					this.khdataList=res.data.rows
				}
			})
		},
		//保存客户
		savekh(v){
			this.$refs[v].validate((valid) => {
				if(valid){
					this.axios.post('/client/add?uid=' + this.uid,{
						name:this.formValidate.name,
						contractTel:this.formValidate.contractTel,
						contractPhone:this.formValidate.contractPhone,
					}).then(res=>{
						if(res.data.status==200){
							this.$notify({
						        title:"",//
						        message:'保存成功',
						        type: 'success',
						        position: 'bottom-right'
					        });
					        this.getkh()
							this.formValidate.name=''
							this.formValidate.contractTel=''
							this.formValidate.contractPhone=''
							this.khisshow=false
						}else{
							this.$notify({
						        title:"",//
						        message:'保存失败',
						        type: 'error',
						        position: 'bottom-right'
					        });
						}
					})
				}
			})

		},
		//取消保存客户
		cancelsave(){
			this.khisshow=false
		},
		//点击
            khstoreImport(){
                this.importisshow=true
                this.activekh=1
                this.oneStep=true
                this.twoStep=false
                this.errorisshow=false
                this.url=''
                this.error=''
                 this.importstoredataList=[]
            },
            //取消
            cancelku(){
                this.importisshow=false
                this.activekh=1
                this.oneStep=true
                this.twoStep=false
                this.errorisshow=false
                this.url=''
                this.error=''
                 this.importstoredataList=[]
            },
            //第一步
            importOne(){
                if(this.url==''){
                    this.errorisshow=true
                    this.error=this.$t('finance.upAt')
                    return
                }else{
                    this.activekh=2
                    this.oneStep=false
                    this.twoStep=true
                }

            },
            //返回第一步
            goOneStep(){
                this.activekh=1
                this.oneStep=true
                this.twoStep=false
            },
            //进入第三
            gothree(){
                this.activekh=3
                this.twoStep=false
                this.threeStep=true
            },
            //继续编辑完成
            sureimport(){
                this.importisshow=false//弹框消失
                this.oneStep=true//第一步显示
                this.twoStep=false//第2步隐藏
                this.threeStep=false//第3步隐藏
                this.url=''
                this.errorisshow=false
                this.error=''
                this.importstoredataList=[]
            },
            //上传时
            onprogress(event, file, fileList){
              
              this.loadingisshow=true
            },
             //上传之前类型之前
            beforeAvatarUpload(file){
               var fileName=new Array()
                fileName =file.name.split('.');
                const extension = fileName[fileName.length-1] === 'xls'
                const extension2 =  fileName[fileName.length-1]=== 'xlsx'
                const isLt2M = file.size / 1024 / 1024 < 20
                if (!extension && !extension2) {

                    this.$notify({
                        title:"",//
                        message:this.$t('finance.upTemplate'),
                        type: 'error',
                        position: 'bottom-right'
                    });
                }
                if (!isLt2M) {
                    this.$notify({
                        title:"",//
                        message: '上传模板大小不能超过 20MB!',
                        type: 'error',
                        position: 'bottom-right'
                    });
                }
              
              return extension || extension2 && isLt2M

            },

            //成功后的会掉
            success(response, file, fileList){
            	console.log(response)
            	// this.source = this.axios.CancelToken.source(); // 这里初始化source对象
               if(response.status==200){
                   this.error=this.$t('finance.upTemplateS'),
                   this.errorisshow=true
                    this.url=file.name
                    //查询导入结果GET GET /client/impres/{uuid}
                    this.axios.get('/client/impres/'+response.rows+'?uid='+this.uid).then(res=>{
                        if(res.data.status==200){
                            this.activekh=2
                            this.oneStep=false
                            this.twoStep=true
                            this.importstoredataList=res.data.rows
                            this.loadingisshow=false
                            this.getkh();
                        }
                    })
                }else{
                    this.errorisshow=true
                    this.error=response.errorMessage
                   this.loadingisshow=false
                }
            },
            orderselectedku(value){
            	this.type=value
            },

            //导入
            //下载阻止冒泡
			stopsku(event){
               event.stopPropagation()
            },
            //点击
            SkustoreImport(){
                this.Skuimportisshow=true
                this.Skuactive=1
                this.SkuoneStep=true//第一步显示
                this.SkutwoStep=false//第2步隐藏
                this.SkuthreeStep=false//第3步隐藏
                this.Skuurl=''
                this.Skuerrorisshow=false
                this.Skuerror=''
                this.SkuimportstoredataList=[]

            },
            //取消
            Skucancel(){
                this.Skuimportisshow=false//弹框消失
                this.SkuoneStep=true//第一步显示
                this.SkutwoStep=false//第2步隐藏
                this.SkuthreeStep=false//第3步隐藏
                this.Skuurl=''
                this.Skuerrorisshow=false
                this.Skuerror=''
                this.SkuimportstoredataList=[]
            },
            //第一步
            SkuimportOne(){
                if(this.Skuurl==''){
                	this.Skuerrorisshow=true
                    this.Skuerror=this.$t('manage.warehouse.upmb')
                    return
                }else{
                    this.Skuactive=2
                    this.SkuoneStep=false
					this.SkutwoStep=true

                }

            },
            //返回第一步
            SkugoOneStep(){
                this.Skuactive=1
                this.SkuoneStep=true
                this.SkutwoStep=false
            },
            //进入第三
            Skugothree(){
                this.Skuimportisshow=false//弹框消失
                this.SkuoneStep=true//第一步显示
                this.SkutwoStep=false//第2步隐藏
                this.SkuthreeStep=false//第3步隐藏
                this.Skuurl=''
                this.Skuerrorisshow=false
                this.Skuerror=''
            },
            //继续编辑完成
            Skusureimport(){
                
            },
             //上传时
            Skuonprogress(event, file, fileList){
            	
            	this.Skuloadingisshow=true
            },
             //上传之前类型之前
            SkubeforeAvatarUpload(file){
               var fileName=new Array()
                fileName =file.name.split('.');
                const extension = fileName[fileName.length-1] === 'xls'
                const extension2 =  fileName[fileName.length-1]=== 'xlsx'
                const isLt2M = file.size / 1024 / 1024 < 10
                if (!extension && !extension2) {
                    this.$notify({
				        title: "",
				        message:this.$t('finance.upTemplate'),//'上传模板只能是xls、xlsx格式!',
				        type: 'error',
				        position: 'bottom-right'
			        });
                }
                if (!isLt2M) {
                    this.$notify({
				        title: "",
				        message: this.$t('finance.upTemplateB'),//'上传模板大小不能超过 10MB!',
				        type: 'error',
				        position: 'bottom-right'
			        });
                }

             return extension || extension2 && isLt2M

            },
            //成功后的会掉
            Skusuccess(response, file, fileList){
                 if(response.status==200){
                   	this.Skuerror=this.$t('finance.upTemplateS')
                   	this.Skuerrorisshow=true
                    this.Skuurl=file.name
                    console.log(response)
                    this.Skuloadingisshow=false
                    this.SkuimportstoredataList=response.rows
                    this.Skuactive=2
                    this.SkuoneStep=false
                    this.SkutwoStep=true
                    this.getsku()
                }else{
                    this.Skuerrorisshow=true
                    this.Skuloadingisshow=false
                    this.Skuerror=response.errorMessage
                   //console.log(response)
                }
            },



            orderselectedsku(value){
            	this.skutype=value
            },
            //添加商品
            addsucesssku(res,file){

				this.skuphoto=res.rows.url
			},
            addGoods(){
            	this.goodsisshow=true
            },
            getsku(){
            	this.axios.get('sku/query?uid='+this.uid).then(res=>{
            		this.goods=res.data.rows
            		this.totalSku=res.data.total
            		this.pageSizeSku=res.data.pageSize
            	})
            },
            getDataSku(current){
            	this.axios.get('sku/query?offset='+current+'&uid='+this.uid).then(res=>{
            		this.goods=res.data.rows
            		this.totalSku=res.data.total
            		this.pageSizeSku=res.data.pageSize
            	})
            },
            changePageSizeSku(s){
            	this.pageSizeSku=s
            },
            //保存POST /sku/add
            savesku(v){
            	this.$refs[v].validate((valid) => {
            		if(valid){
            			this.axios.post('/sku/add?uid='+this.uid,{
            				skuName:this.formValidateG.skuName,
            				price:Number(this.formValidateG.price),
            				costPrice:Number(this.formValidateG.costPrice),
            				wholePrice:Number(this.formValidateG.wholePrice),
            				barcode:this.formValidateG.barcode,
            				skuCode:this.formValidateG.skuCode,
            			}).then(res=>{
            				if(res.data.status==200){
            					this.$notify({
							        title:"",//
							        message: '新建成功',
							        type: 'success',
							        position: 'bottom-right'
						        });
						        this.getsku()
						        this.goodsisshow=false
						        this.formValidateG.skuName=''
	            				this.formValidateG.price='0'
	            				this.formValidateG.costPrice='0'
	            				this.formValidateG.wholePrice='0'
	            				this.formValidateG.barcode=''
	            				this.formValidateG.skuCode=''
            				}else{
            					this.$notify({
							        title:"",//
							        message: res.data.errorMessage,
							        type: 'error',
							        position: 'bottom-right'
						        });
            				}
            			})
            		}
            	})
            },
            cancelsaveG(){
            	this.goodsisshow=false

            },

	},
	created(){
		this.$nextTick(()=>{
			this.getAllfl()
			this.getattrs()
			this.getkh()
			this.getsku()
			this.customerup=LoadUrl.actionLoad.customerK//供应商导入模板
			this.SkuskuLoad=LoadUrl.actionLoad.SKU//商品导入模板
		})
	},
	mounted(){
		
	},
}
</script>
<style type="text/css" scoped>
.navigationHome{
	width:100%;
	height:100%;
}
.head{
	width:100%;
	height:60px;
	background: #F4F4F4;
	display:flex;
	border-bottom:1px solid #e4e4e4;
}
.main-right-head{
	width:100%;
	height:60px;
	line-height: 60px;
	display:flex;

	border-bottom:1px solid #e4e4e4;
	justify-content: space-between;
}
.head .left{
	width:20%;
	float:left;

}
.head .left img{
	vertical-align:middle;
	float:left;
	margin-left:20px;
	margin-top:5px;
}
.head .right{
	width:80%;
	font-size:16px;
	font-weight:900;
	text-align: center;
	display:inline-block;

	height:60px;
	line-height: 60px
}
.head .right span{
	letter-spacing: 3px;
	margin-left:-20%;
}
.zsys{
	width:100px;
	text-align: center;
	margin-top:7px;
	margin-left: 80px
}
.dlsuccess{
	width:100%;height:100%;margin:0 auto;text-align:center;display:flex;flex-direction:column;align-items:center;
	justify-content: center
}
.zsys span{
	font-weight:900;
	display:block;
	font-size:16px;
}
.main{
	width:100%;
	height:100%;
	display:flex;
	margin-bottom:60px;
}
.main-left{
	background: #495060;

	width:135px;
	height:100%;

	color:#fff;

}
.main-left>div{
	margin-top:17px;
}
.main-right{
	width:100%;
	height:100%;
	overflow:auto;
}
.avatar-uploader .el-upload {
    border: 1px dashed #d9d9d9;
    border-radius: 6px;
    cursor: pointer;
    position: relative;
    overflow: hidden;
  }
  .avatar-uploader .el-upload:hover {
    border-color: #409EFF;
  }
  .avatar-uploader-icon {
    font-size: 28px;
    color: #8c939d;
    width: 100px;
    height: 100px;
    line-height: 100px;
    text-align: center;
  }
  .avatar {
    width: 100px;
    height: 100px;
    display: block;
  }
  .page-box{
  	margin-bottom:120px;

  }
.right-left{
width: 100px;

border:1px dashed #e1e1e1;
}
.table1 div{
	height:50px;
	line-height: 40px;
	margin-top:5px;
}
.table1 div span{
	text-align: left
}
.bottom-btn{
	position:absolute;
	bottom:20px;
	right:50px;
}

.crow{
    cursor: pointer;
    display: inline-block;
    width: 17px;
    height: 17px;
    text-align: center;
    line-height: 14px;
    border: 1px solid #e9e9e9;
    user-select: none;
    background: #fff;
    margin-right: 10px;

}
.croworg{
    cursor: pointer;
    display: inline-block;
    width: 17px;
    height: 17px;
    text-align: center;
    line-height: 14px;
    border: 1px solid #e9e9e9;
    user-select: none;
    background: #fff;
    margin-right: 10px;
    margin-top: 15px;
}
.levelTitle{
    display: flex;
    justify-content: space-around;
    padding:10px 0;
    background:#f5f5f5;
}
.level1A{
    width:48px;
    height: 48px;
}
.level1A img{
    width: 100%;
    height:100%;
}
.level1ul{
    display: flex;
    justify-content: space-around;
    padding:10px 0;
    border-bottom: 1px solid #e4e4e4;

}
.level1ul:hover{
    background: #f4f4f4
}
.level1ulorg{
	display: flex;
    justify-content: space-around;
    padding:10px 0;
    border-bottom: 1px solid #e4e4e4;
	line-height: 50px
}
.level1ulorg:hover{
    background: #f4f4f4
}
.level1Name,.level2NameT,.level3NameT{
    height:50px;
    width:150px;
    line-height: 50px;
    display: flex;
   align-items: center;
}
.level1Nameorg,.level2NameTorg,.level3NameTorg{
	 height:50px;
    line-height: 50px;
    display: flex;
   /*align-items: center;*/
}

.level2NameT,.level3Name{
    margin-left:50px;
}
.level3Name{
    margin-left:100px;
}
.editInput,.level2Name,.level3Name{
    width:100%;
    height: 30px;
    line-height: 30px;
    overflow: hidden;
}
.level1B{
    margin-left:-50px;
}
.level1C{
    margin-left:-100px;
}
.action{
    line-height: 50px
}
.action a{
    margin-left:5px;
}
 .editInput{
    display: inline-block;
    text-indent: 10px;
    color: #555;
    background-image: none;
 
}
 .editInput:focus{
    border-color: #66afe9;
    outline: 0;
     border: 1px solid #eee;
     border-color:rgba(102, 175, 233, .6);
    -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 4px rgba(102, 175, 233, .6);
    box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 4px rgba(102, 175, 233, .6);
}
</style>
<style type="text/css">
	.ivu-steps .ivu-steps-head,.ivu-steps .ivu-steps-title{
		color:#fff!important;
		background: #495060!important;
	}

.ivu-steps-item{
	justify-content: center;
	align-items: center;
}
.ivu-steps-item.ivu-steps-status-process .ivu-steps-head-inner{
	border-width:2px!important;

}
.ivu-steps-item.ivu-steps-status-wait .ivu-steps-head-inner{
	background-color: #495060!important
}
</style>
